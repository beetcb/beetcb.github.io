<!DOCTYPE html><html lang="en"><head>
	    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content=" Beet's blog, share &amp; blogging">
		<meta name="title" content="超简单搭建甜菜一盘记录-oneindex | Beet's blog, a frontEnd lover's blog site">

		<title>超简单搭建甜菜一盘记录-oneindex | Beet's blog, a frontEnd lover's blog site</title>

		<meta property="og:site_name" content="beet's blog">
		<meta property="og:url" content="https://www.beetcb.com/">
		<meta property="og:type" content="website">
		<meta property="og:title" content="超简单搭建甜菜一盘记录-oneindex | Beet's blog, a frontEnd lover's blog site">
		<meta property="og:description" content=" Beet's blog, share &amp; blogging">
	    
	    <link rel="stylesheet" href="/static/css/my.css">
	    <link rel="stylesheet" href="/static/css/prism-dracula.css"> 
      <script src="https://cdn.jsdelivr.net/npm/turbolinks@5.2.0/dist/turbolinks.min.js"></script>
	    <link rel="icon" href="/static/favicon.ico">
	    </head><body>
	    <main class="main">
		
	<article class="article">
	    <h1 class="title">超简单搭建甜菜一盘记录-oneindex</h1>
	    <div class="location content">
		<a href="/">Home</a> /posts/1/<br>
		<time datetime="Posted date: 2020 Mar 29">Posted date: 2020 Mar 29</time>
	    </div>
	    <div class="content">
		<blockquote>
<p>beet 已改用 <a href="https://github.com/beetcb/onedrive-cf-index-CN"><code>onedrive-cf-index-CN</code></a></p>
</blockquote>
<h4>效果演示</h4>
<p>甜菜一盘演示地址</p>
<blockquote>
<p>https://drive.tcxz.cc</p>
</blockquote>
<p>演示截图如下：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAQCAIAAABshEP8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABCElEQVQ4y6WTiRKDIAxE/f+vtVxyhNDVVEopao8dx/HAx2YTpwJxyTkTkffeGGOtDSEwc/5AvKlsmloWEM65ZVlijMMvaVeHa1il7KDFWoeLlJL44ka4xR5hU9qFDwcs2AHI+4BdeSQJAcZxPmPhKUBaG1iT1+/CGlCQ5jULG8q6rrSO5ezDF9FxjdV/F20bPPLCApyp0TgvjSKNQbRDa4ITL4d9lHUyEJAMxLN3mXDQQeH9fFUW8oIv4ALaicbHCA+oZ2VxLm8as2rLwVLqZoxeDW5zFCn9wkJkSql5nrVWwlqj4Zcf5SOWjHWdDDjKpxkd5tV2StrE3+hlJvgP1ZKnYf3DdC51B0aRn+WUgrA+AAAAAElFTkSuQmCC" alt="" data-src="https://m.beetcb.com/postimg/1/1.png" class="lazyload" width="2000" height="1303"></p>
<h4>优点（多多）</h4>
<ul>
<li>
<p>oneindex 不走服务器流量，直连国内世纪互联数据中心</p>
</li>
<li>
<p>下载不限速，亲测跑满带宽（速度优于国产网盘）</p>
</li>
<li>
<p>空间1-5 T , 自定义页面，可玩性大</p>
</li>
<li>
<p>微软官方解释：</p>
<blockquote>
<p>我们为中国用户提供了 Office 365 全球版和 Office 365 中国版两种版本。主要区别在于：
Office 365 中国版由世纪互联负责运营，数据中心位于北京、上海，可以提供增值税发票。
目前仅 Office 365 全球版提供 Yammer、Microsoft Planner、Microsoft Teams 以及 Sway 等产品。</p>
</blockquote>
</li>
</ul>
<h4>准备工作及搭建条件</h4>
<h5>撸一个世纪互联版 onedrive 账号（<strong>必须管理员开放 API</strong> ）</h5>
<p>获取渠道如下：</p>
<blockquote>
<p>#<strong>合租（超稳车）</strong>：拉人上车或者上别人的车
<a href="https://products.office.com/zh-cn/compare-china-global-versions-office365">世纪互联官方购买入口</a></p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAIAAAAhTOL3AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADvElEQVQ4y0WTeXejNhTF/f0/0PzRpk09nombjD1JvLCJRYAEArSzGSd2+nA6rQ7ngJ+ln3Tvu1osl8v1er3ZbLbb7cNtrFYrKN79ef/lt7svd/d/rL4/vezdCDtx6kR4uzs8brYPfz+6KGJCni/X9+vH9foBY3E8Hn3fD2/D8zzXdQ+Hw36/f9ntf77stq/716PrRUmUU5QSlFE/xk4Qvrq+n5KsFrIb7TBO5/Pl8r4gtGSsquu6KAqMcYACx3WAHsVxluc4zaIEozhxUbj3AwClpMjLCuEcWC7OwpxkRam0nqZp0Y1v4/QG4LZtq6rCcRJHMaVUa306nfq+bxqOcRr4CKGQ0kIb2w9jI2SaU9dHno+SBHMhxnFctMN5OL2dThMsDtNwvVt/f/3mRE4jGgC11pKSPLs/vz4vN8cfKUmttfMGvPFi7+H1+3q/hg8hxTiMi9P5Mr29T9O57VpE0PK4vD/eO7mjrIa/h34oeLFBP+4Ov2+iTSEK2H8YRqmVkzkwc+WtUIFgLYhYXK7Xy+UCaruuixh+CJ++Bg8O8ZRRfdfDw2T1jHd/Bd+2+AVYcCgomtaELHxMHp+Sp4hFtrWzRuglsOBLa5XS7Bh7h9jDRQZ2ghyjNavLIA2P2AtJUosGbDXWcsExxR72/MzPWa7NLGJxvbHafqi4RLjwotyfG5hL3mgpoekprYKEBgnBGalYaRXoU5zzsihLyEDBmroxxoAfMwtU6m7Ia7kP6Q4lOxTGSdAwopqaNtJP2SEi+yhGSUjy2DS1UVJIyRgrS8gTAy4omDVe59RetRlJYY5HaDP2oigniaxL3fCC2SBgjpNDynGGWZm1gnfWdGCZsRq0QUZunZ29/2RZM1ZUR8csg4ATwnljtDRS1cxgVCR+nqd5XVdS8s7orgVLBsD1PfR5mF/DMLM+ZtZl7E6mtlVI6pSIorT2NrvtrWhFVtVxLig1Sg2/xjiz2tYaeOA9frI+/erHSZmOVRzuE3gJuYXt2q4XpqO1SgjDtKB1w7Xp+kG1vbR9ITStORQrIS1Ux1+sbpxk21fScCGVlDNr6GFGZbqM27DkUcGSsqJcapimulJBGFVUVHHB0qoRBmSP/7FOsFWjDFgJR4cQ3VhdKW1SKUSbkM4s0gg4PhQJN4jykAKrwqzm2rbdMGcVgj+eJlAEnO5m6c3VHj6lsZVQZSMqLiBrXM2LoMiVKRvJbsVaQqGFFf/m/nw+D7Od/49PIhwQ9AoBlxciquHnfIU6uPJGSigLpRQEFUCQr38AOaDMzYGSieEAAAAASUVORK5CYII=" alt="" data-src="https://m.beetcb.com/postimg/1/2.png" class="lazyload" width="1999" height="1405"></p>
<p>#<strong>某宝购买（摇摇车）</strong>：稳定性难说,这里beet推荐官网购买</p>
<p>#非世纪互联（除个人版） onedrive 也可搭建</p>
</blockquote>
<h5>拥有服务器与个人域名</h5>
<blockquote>
<p>无服务器及域名可选择用* 阿里云 * 或* 腾讯云 *的函数计算功能</p>
</blockquote>
<h5>阅读官方 md 说明</h5>
<blockquote>
<p><s><a href="https://github.com/donwa/oneindex">oneindex官方github地址</a></s> 失效 ，替代<a href="https://github.com/Layne666/oneindex/archive/master.zip">下载地址</a>
自学md文档可以快速上手，甚至可以不看我这篇教程，一个小白教程，必然从安装宝塔开始，始简单的折腾吧！</p>
</blockquote>
<h4>服务器及域名的配置</h4>
<p>+安装宝塔面板与建站依赖</p>
<p>++域名解析到服务器</p>
<p>+++新建网站并申请 ssl 证书, php安装curl扩展</p>
<p>++++ 复制<a href="https://github.com/donwa/oneindex/archive/master.zip">下载链接</a>，远程下载并解压到网站根目录</p>
<h5>[两个需要修改的位置]</h5>
<ol>
<li>取消注释  index.php 文件里下面两行代码（line6&amp;7）</li>
</ol>
<pre class="language-php"><code class="language-php"><span class="token comment">//onedrive::$api_url = "https://microsoftgraph.chinacloudapi.cn/v1.0";</span><br><span class="token comment">//onedrive::$oauth_url = "https://login.partner.microsoftonline.cn/common/oauth2/v2.0";</span></code></pre>
<ol start="2">
<li>修改 contrer 目录下 AdminController.php 为自己的域名（line186）</li>
</ol>
<pre class="language-php"><code class="language-php"><span class="token variable">$redirect_uri</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'https://oneindex.github.io/'</span><span class="token punctuation">;</span></code></pre>
<h4>登录 azure 获得机密与ID</h4>
<blockquote>
<p>最关键部分，配置正确直接一次性成功，请按图操作</p>
</blockquote>
<h5>[登录并注册应用]</h5>
<p><a href="https://portal.azure.cn/">azure登录入口</a></p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAOCAIAAABVWCAXAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFUlEQVQ4y22TiXLbMAxE9f8fmZkmE8fWxQMECF5yl5TScdpiIJmSwcflEpo+F/v+eX97e/v1/n57LMaLCzGIWke7dcb5IDFGxZWS5lJKvQIDjtGHgBwlaZqNn7f9Ps+3Zf9Y3OfGt5UeG903h782z441xIRkTZKK5qrlSsdiPFnvRURTmvDgAwcRy/pl5GOhj4e9r+6xudUGQ+w5ckyiOaYSO6ileoxsjnl3zlgLVgJrd94FJk2kxRjaVrvMZne09Qyr5xNH0tWdutKFGyxrd2su1rwbTPMs2LBSSEQaGLZAM1yDW8QSonLXlXOprbWjxxNXELDMZnZm7qylszy2iclFpEZtKaMu5QJLLQVHcBfSOlRUB3BEa3i5GjNvABCET5txGKEMWlqt14rHgUecTWAO0DVAPfGmn0DGSiAOln2sYHjLcSJCpSTVb/HH89lpWBiy5TUiDuEvFkPXfV0hbA9xYkGXxJzzSTnjhIKeQcTx54K5yDRaAfcyViYRWHRbsEly2CN67TyFV9ZFfD5LO/LIU/CP7Ky4GPu1mt0HimlCb6kq3Pmp68wLVP7H6rqirs7PcJwYPTjhDlYdrv/B4be2I5YmuaE5wcLM9lLwvFiyOwvLQoCTOqGtYMSr8adfIdU1lCUU0pprQ2P11vouO93EF2G9Nc7wEDQNVP2XtXH5tSvSClwffl9ddQXG+OQpkCd3sn4DAlX2BX5xNkEAAAAASUVORK5CYII=" alt="" data-src="https://m.beetcb.com/postimg/1/3.png" class="lazyload" width="2000" height="1105"></p>
<h5>[保存client ID，申请权限与秘钥]</h5>
<blockquote>
<p>记得复制client和secrets备用</p>
</blockquote>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAIAAADOyWIBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABl0lEQVQoz31Sy27cMAz0//9MD7323F6CHookTVFkN/uA44dkkSL1sp0gIy8WySUZjGxBAIfkkE0HDGM7Tofengc7WMfeq2q4QkSYvWMm770IjrF2HA2Id7yIKhFZaxucyZEl7ica7DQRQ6bkPF+RUkIAMhB+NUVEOIKdg/jlAS/KzI2Z2LGQ14kENeEumlKec1k2rrhLSAiSEFMuucw5F0jUGlFSiNBCH0jQWCcsUWORkL0mUEIJab5ywVdjRgwYkSUXHAQTM5qovYNUP82xp86qociSWbO+q2zMSyprntd5WdDvsiFDK+jmoFy0HDnINfendteac8+dDcYnn5dlffnI9aXyI6AFl+ooVLl2KpgB0PzePd4dzvvW7DtuXbChIPL1c0CrlHLxO8KpbdZ1mvDr9unx4Xh66syuc2ernU95QSFfqL2WMsM5TAP2pepgijHAwebX3/3Pf6c/x/H/8/Q8+YFVYsa8vgC2oG4Jwam6ctsQffXr+83h283px113ezSdJUPe+W3YnwNmYxF7rKsxuEDvsqtvylHIAumnfNoAAAAASUVORK5CYII=" alt="" data-src="https://m.beetcb.com/postimg/1/4.png" class="lazyload" width="2000" height="800"></p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAMCAIAAAAYkIEcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB7UlEQVQoz3WS2W7cMAxF/f9/1fe+5aFAimTaScYjL1opUpsd9MozSdOiJWgBBqijy0sOj88/L2py3sfIMUbqyfck5+yyzKNS16tS8zwbrUOv7KX8Kbz3etXD08t4mdbVBhvYEYcoURKnLLlIEiLctc65EIJHepwUgOo1BTW30xNr64encT7PWhk/OdKBPYNSc2217TgZd0RSzrltMVcTkw5iY465Sd0/MkgxPg6ni3qdV2XcfLCIU8oll1pKhTpICERRhEs1XK6OkZpyLNs/WC/XadLGUrScIIrSDYSokhL6Mtb2JiMvJMrxHCSkWtpb3X6npBKIh1FNizaeYmDxHZeIpRsLLcIHywCHmWiSs+bTClwqddv3/e098DJuDNfO0jYERxHeW2IPaztKuvcxAoc2U0ok+WLlxxpHE+F9V/4eqEXVsKzaYExYBcZ0pFsjBycnfNAIy/DbWpPSRsvPyp0n9EGYxwcLouDEQETwpbatbX8H3sUc6dik+x0Rd+wIRSgV4G7q7iztIyxPbW+f+r+7UBvEWtwOAT22hplk6EYDOScgIBZPwjhAe4/fzstJ2clhkaHvj4AgcLTWxhiUHvM4SMfS387uBqwkQs3w5eH89XH8/ophGu9x9yMcZK9az0sPlGIx/H8C7ymlfgEpqVgyz/1pMQAAAABJRU5ErkJggg==" alt="" data-src="https://m.beetcb.com/postimg/1/5.png" class="lazyload" width="2000" height="921"></p>
<h4>复制粘贴［完事儿］</h4>
<p>*输入域名进入网站</p>
<p>*按提示粘贴提前复制的 client ID 与secrets秘钥</p>
<p>*绑定账户，搭建成功</p>
<p>*进入后台，修改密码</p>
<h4>自定义</h4>
<p>自定义主题相对简单，只需要搜索 oneindex 主题，替换默认主题并做一定修改就可，这里不再赘述</p>
<h4>最后，享受高速上传与下载吧(别说你还不会)</h4>

	    </div>
	    <div class="outline"></div>
	</article>

     
		</main>
		<footer class="footer">
		    <div class="footer-desc">
			made with love&amp;<a style="color: skyblue;" href="https://www.11ty.dev/" target="_blank">11ty</a> by beet <br> 
			<a href="http://www.beian.miit.gov.cn/" target="_blank">ICP-20003648-1</a>
		    </div>
		</footer>
    <script>Turbolinks.start()</script>
	    <script>
            (function (selector, src, preferNativeLazyLoad) {
  var images = document.querySelectorAll(selector);
  var numImages = images.length;

  if (numImages > 0) {
    if (preferNativeLazyLoad && 'loading' in HTMLImageElement.prototype) {
      for (var i = 0; i < numImages; i++) {
        var keys = ['src', 'srcset'];

        for (var j = 0; j < keys.length; j++) {
          if (images[i].hasAttribute('data-' + keys[j])) {
            var value = images[i].getAttribute('data-' + keys[j]);
            images[i].setAttribute(keys[j], value);
          }
        }
      }

      return;
    }

    var script = document.createElement('script');
    script.async = true;
    script.src = src;
    document.body.appendChild(script);
  }
})(
              'img',
              'https://m.beetcb.com/lib/lazysizes.min.js',
              false
            );
          </script></body></html>