<!DOCTYPE html><html><head>
	    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>BrowserStack-JSå¼•æ“æœºç†(æµ…è§£) | Beet's blog, a frontEnd lover's blog site</title>
    <link type="text/css" rel="stylesheet" href="/static/main.css">
		<meta name="description" content=" Beet's blog, share &amp; blogging">
		<meta name="title" content="BrowserStack-JSå¼•æ“æœºç†(æµ…è§£) | Beet's blog, a frontEnd lover's blog site">
		<meta property="og:site_name" content="beet's blog">
		<meta property="og:url" content="https://www.beetcb.com/">
		<meta property="og:type" content="website">
		<meta property="og:title" content="BrowserStack-JSå¼•æ“æœºç†(æµ…è§£) | Beet's blog, a frontEnd lover's blog site">
		<meta property="og:description" content=" Beet's blog, share &amp; blogging">
	    <link rel="icon" href="/static/assets/favicon.ico">
	    
	    
      <script src="/static/main.js" defer=""></script>
      <script src="https://cdn.jsdelivr.net/npm/turbolinks@5.2.0/dist/turbolinks.min.js"></script>
	  </head><body>
	    <main class="main">
		
	<article class="article">
	    <h1 class="title">BrowserStack-JSå¼•æ“æœºç†(æµ…è§£)</h1>
	    <div class="location content">
		<a href="/">Home</a> /posts/15/<br>
		<time datetime="Posted date: 2020 Jul 21">Posted date: 2020 Jul 21</time>
	    </div>
	    <div class="content">
		<h3>é¦–å…ˆä»åŠ è½½ js è¯´èµ·</h3>
<p><strong>æµè§ˆå™¨å¦‚ä½•åŠ è½½ js çš„</strong></p>
<p>ç®€å•æ¥è¯´ï¼Œåœ¨è¯»å–HTMLæ–‡æ¡£æ—¶ï¼Œé‡åˆ° <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œå°±å¼€å§‹ä¸‹è½½ js æ–‡æ¡£ï¼Œä¸‹è½½å®Œæ¯•ç«‹å³æ‰§è¡Œï¼ˆè¿™ä¸¤ä¸ªè¿‡ç¨‹éƒ½æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆæš‚åœå¯¹htmlçš„è¯»å–ï¼Œç­‰jsä¸‹è½½æ‰§è¡Œæ‰èƒ½ç»§ç»­è¯»å–ï¼‰</p>
<p><strong>defer async</strong></p>
<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ–¹æ³•æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œä¸ºäº†ä¼˜åŒ–ï¼Œé€šè¿‡åœ¨ <code>&lt;script&gt;</code> æ ‡ç­¾é‡ŒåŠ ä¸Š defer æˆ– asyncï¼Œå¯ä»¥è¾¾åˆ°å¼‚æ­¥å¤„ç†çš„æ•ˆæœï¼Œä¸¤è€…åŒºåˆ«å°±æ˜¯å‰è€…åœ¨HTMLåŠ è½½å®Œæˆä¹‹åå†æ‰§è¡Œjsï¼Œåè€…æ˜¯åœ¨ä¸‹è½½å®Œé©¬ä¸Šæ‰§è¡Œjs</p>
<blockquote>
<p>æ³¨æ„ï¼š,defer å’Œ asyncåªèƒ½åœ¨åŠ è½½å¤–éƒ¨jsæ–‡ä»¶æ‰æœ‰ä½œç”¨ï¼Œç›´æ¥å†™åœ¨ html æ–‡æ¡£é‡Œé¢çš„ä¸ä¼šç”Ÿæ•ˆ</p>
</blockquote>
<h3>å…ˆè¯´JSå¼•æ“æå¤§ä½œç”¨</h3>
<blockquote>
<p>æ‰€è°“çš„ä»£ç å¼•æ“ã€è¿è¡Œå¼•æ“ã€åƒåœ¾å›æ”¶å¼•æ“åªæ˜¯æ–¹ä¾¿ç†è§£ç¼–å‡ºæ¥çš„è¯æ¡ï¼Œå®˜æ–¹æ²¡æœ‰ç›¸å…³è¯´æ³•ï¼ŒæŠŠå®ƒä»¬éƒ½å½“æˆå¼ºå¤§çš„ js å¼•æ“å°±å¯¹äº†ã€‚</p>
</blockquote>
<ul>
<li>åŸå§‹ä»£ç ç›¸å…³(æ¶‰åŠè¯»ã€ç¼–è¯‘ã€ä¼˜åŒ–ç­‰) â€”â€”&gt; ä»£ç å¼•æ“</li>
<li>ä»£ç è¿è¡Œç›¸å…³(æ¶‰åŠäº‹ä»¶å¾ªç¯) â€”â€”&gt; è¿è¡Œå¼•æ“</li>
<li>åƒåœ¾å›æ”¶ç›¸å…³ â€”â€”&gt; åƒåœ¾å›æ”¶å¼•æ“</li>
<li>å…¶ä»–å¼•æ“</li>
</ul>
<h3>JS ä»£ç å¼•æ“</h3>
<p>è¿™é‡Œæ ‡é¢˜è¯´æ‰€çš„ä»£ç å¼•æ“æ˜¯æŒ‡å¼•æ“å¯¹ä»£ç çš„å¤„ç†æ“ä½œã€‚</p>
<blockquote>
<p>JSä»£ç å¼•æ“çš„ç»„ä»¶é¢„è§ˆ</p>
<ul>
<li>Parser</li>
<li>AST</li>
<li>Interpreter</li>
<li>Profilerï¼ˆJITï¼‰</li>
<li>Compilerï¼ˆJITï¼‰</li>
<li>Optimized codeï¼ˆJITï¼‰</li>
</ul>
</blockquote>
<blockquote>
<p>å‰å¥ï¼šåœ¨ä¸‹è½½jsæ–‡ä»¶æ—¶ï¼Œè¯»å–å°±å·²ç»å¼€å§‹äº†(è¿™æ ·ä¸‹è½½å®Œå°±å¯ä»¥ç«‹å³æ‰§è¡Œ)ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸‹è½½è¿‡ç¨‹ä¼ è¾“çš„æ˜¯<code>å­—èŠ‚</code>ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´jsæ–‡ä»¶å°±æ˜¯ä¸€ä¸ª<code>å­—èŠ‚æµ</code>ï¼Œé€šè¿‡å­—èŠ‚æµè§£ç ç³»ç»Ÿï¼ŒæŠŠä¸‹è½½çš„å­—èŠ‚è§£ç æˆ <code>è¿›åˆ¶ç¼–ç </code>
æ¯”å¦‚é‡‡ç”¨16è¿›åˆ¶ç¼–ç ï¼Œå¾—åˆ°çš„è¿›åˆ¶ç¼–ç å°±å¯èƒ½æ˜¯  <code>2c 25 34...</code>ã€‚</p>
</blockquote>
<h4>Parserï¼ˆè¯»å–ï¼‰</h4>
<p>AST(Abstract syntax tree)ï¼Œä»–çš„å·¥ä½œæ˜¯åœ¨ <code>Parser</code> å¾—åˆ° <code>è¿›åˆ¶ç¼–ç </code> åï¼Œå°†å…¶è§£ç æˆ <code>tokens</code></p>
<blockquote>
<p>æ‰¿æ¥ä¸Šæ–‡ï¼Œè¿™ä¸€æ­¥å¾—åˆ°çš„å°±æ˜¯ <code>let...</code></p>
</blockquote>
<h4>AST (ç”Ÿæˆè¯­æ³•æ•°)</h4>
<p>å¾—åˆ° <code>tokens</code> åï¼Œå†å°†å…¶æ ¹æ®è¯­æ³•è§„èŒƒåˆ›å»ºnodeèŠ‚ç‚¹ï¼Œè¿›è€Œæ„å»º <code>syntax tree</code> æ•°æ®ç»“æ„ã€‚</p>
<blockquote>
<p>å…·ä½“å¤§æ¦‚å°±æ˜¯jsæ ¹æ®tokensåˆ¤æ–­å…³é”®å­—å’Œä¿ç•™å­—ï¼Œåˆ†ç±»å’Œæ ‡è®°å„ä¸ªä¸åŒä»£ç æ®µçš„ä¸åŒåŠŸèƒ½ï¼Œæ–¹ä¾¿è§£é‡Šä»£ç </p>
</blockquote>
<p>æ¯”å¦‚æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨é‡Œå†™çš„ä¸€æ®µä»£ç ï¼š</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fooMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'syntax'</span><span class="token punctuation">)</span> <br>  <br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'tree'</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">printTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fooMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <br><span class="token punctuation">}</span></code></pre>
<p>é€šè¿‡å‰ä¸‰æ­¥ç”Ÿæˆçš„ <code>syntax tree</code> ä½¿ç”¨JSONå¯ä»¥è¡¨ç¤ºå¦‚ä¸‹[æ˜¾ç¤ºå¤ªé•¿è¯·å³ä¸Šè§’æŠ˜å ]</p>
<blockquote>
<p>æ³¨ï¼šhttps://astexplorer.net/ æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ASTç”Ÿæˆå·¥å…·</p>
</blockquote>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Program"</span><span class="token punctuation">,</span><br>  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">146</span><span class="token punctuation">,</span><br>  <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"FunctionDeclaration"</span><span class="token punctuation">,</span><br>      <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>      <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">47</span><span class="token punctuation">,</span><br>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span><br>        <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span><br>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"fooMe"</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token property">"expression"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"generator"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"async"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"BlockStatement"</span><span class="token punctuation">,</span><br>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span><br>        <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">47</span><span class="token punctuation">,</span><br>        <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>          <span class="token punctuation">{</span><br>            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ExpressionStatement"</span><span class="token punctuation">,</span><br>            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span><br>            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">41</span><span class="token punctuation">,</span><br>            <span class="token property">"expression"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"CallExpression"</span><span class="token punctuation">,</span><br>              <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span><br>              <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">41</span><span class="token punctuation">,</span><br>              <span class="token property">"callee"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"MemberExpression"</span><span class="token punctuation">,</span><br>                <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span><br>                <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">31</span><span class="token punctuation">,</span><br>                <span class="token property">"object"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span><br>                  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"console"</span><br>                <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                <span class="token property">"property"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">31</span><span class="token punctuation">,</span><br>                  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"log"</span><br>                <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                <span class="token property">"computed"</span><span class="token operator">:</span> <span class="token boolean">false</span><br>              <span class="token punctuation">}</span><span class="token punctuation">,</span><br>              <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>                <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Literal"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span><br>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"syntax"</span><span class="token punctuation">,</span><br>                  <span class="token property">"raw"</span><span class="token operator">:</span> <span class="token string">"'syntax'"</span><br>                <span class="token punctuation">}</span><br>              <span class="token punctuation">]</span><br>            <span class="token punctuation">}</span><br>          <span class="token punctuation">}</span><br>        <span class="token punctuation">]</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><br>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"FunctionDeclaration"</span><span class="token punctuation">,</span><br>      <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">49</span><span class="token punctuation">,</span><br>      <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">88</span><span class="token punctuation">,</span><br>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">58</span><span class="token punctuation">,</span><br>        <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span><br>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token property">"expression"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"generator"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"async"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"BlockStatement"</span><span class="token punctuation">,</span><br>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span><br>        <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">88</span><span class="token punctuation">,</span><br>        <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>          <span class="token punctuation">{</span><br>            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ExpressionStatement"</span><span class="token punctuation">,</span><br>            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">67</span><span class="token punctuation">,</span><br>            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">86</span><span class="token punctuation">,</span><br>            <span class="token property">"expression"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"CallExpression"</span><span class="token punctuation">,</span><br>              <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">67</span><span class="token punctuation">,</span><br>              <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">86</span><span class="token punctuation">,</span><br>              <span class="token property">"callee"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"MemberExpression"</span><span class="token punctuation">,</span><br>                <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">67</span><span class="token punctuation">,</span><br>                <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">78</span><span class="token punctuation">,</span><br>                <span class="token property">"object"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">67</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">74</span><span class="token punctuation">,</span><br>                  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"console"</span><br>                <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                <span class="token property">"property"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">78</span><span class="token punctuation">,</span><br>                  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"log"</span><br>                <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                <span class="token property">"computed"</span><span class="token operator">:</span> <span class="token boolean">false</span><br>              <span class="token punctuation">}</span><span class="token punctuation">,</span><br>              <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>                <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Literal"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">79</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">,</span><br>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"tree"</span><span class="token punctuation">,</span><br>                  <span class="token property">"raw"</span><span class="token operator">:</span> <span class="token string">"'tree'"</span><br>                <span class="token punctuation">}</span><br>              <span class="token punctuation">]</span><br>            <span class="token punctuation">}</span><br>          <span class="token punctuation">}</span><br>        <span class="token punctuation">]</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><br>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"FunctionDeclaration"</span><span class="token punctuation">,</span><br>      <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span><br>      <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">146</span><span class="token punctuation">,</span><br>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span><br>        <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">108</span><span class="token punctuation">,</span><br>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"printTree"</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token property">"expression"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"generator"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"async"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>      <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"BlockStatement"</span><span class="token punctuation">,</span><br>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">111</span><span class="token punctuation">,</span><br>        <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">146</span><span class="token punctuation">,</span><br>        <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>          <span class="token punctuation">{</span><br>            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ExpressionStatement"</span><span class="token punctuation">,</span><br>            <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">114</span><span class="token punctuation">,</span><br>            <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">142</span><span class="token punctuation">,</span><br>            <span class="token property">"expression"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"CallExpression"</span><span class="token punctuation">,</span><br>              <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">114</span><span class="token punctuation">,</span><br>              <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">142</span><span class="token punctuation">,</span><br>              <span class="token property">"callee"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"MemberExpression"</span><span class="token punctuation">,</span><br>                <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">114</span><span class="token punctuation">,</span><br>                <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">125</span><span class="token punctuation">,</span><br>                <span class="token property">"object"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">114</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">121</span><span class="token punctuation">,</span><br>                  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"console"</span><br>                <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                <span class="token property">"property"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">122</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">125</span><span class="token punctuation">,</span><br>                  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"log"</span><br>                <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                <span class="token property">"computed"</span><span class="token operator">:</span> <span class="token boolean">false</span><br>              <span class="token punctuation">}</span><span class="token punctuation">,</span><br>              <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>                <span class="token punctuation">{</span><br>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"BinaryExpression"</span><span class="token punctuation">,</span><br>                  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">126</span><span class="token punctuation">,</span><br>                  <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">141</span><span class="token punctuation">,</span><br>                  <span class="token property">"left"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"CallExpression"</span><span class="token punctuation">,</span><br>                    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">126</span><span class="token punctuation">,</span><br>                    <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">133</span><span class="token punctuation">,</span><br>                    <span class="token property">"callee"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                      <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">126</span><span class="token punctuation">,</span><br>                      <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">131</span><span class="token punctuation">,</span><br>                      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"fooMe"</span><br>                    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                    <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>                  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"+"</span><span class="token punctuation">,</span><br>                  <span class="token property">"right"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"CallExpression"</span><span class="token punctuation">,</span><br>                    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">136</span><span class="token punctuation">,</span><br>                    <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">141</span><span class="token punctuation">,</span><br>                    <span class="token property">"callee"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>                      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Identifier"</span><span class="token punctuation">,</span><br>                      <span class="token property">"start"</span><span class="token operator">:</span> <span class="token number">136</span><span class="token punctuation">,</span><br>                      <span class="token property">"end"</span><span class="token operator">:</span> <span class="token number">139</span><span class="token punctuation">,</span><br>                      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><br>                    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>                    <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>                  <span class="token punctuation">}</span><br>                <span class="token punctuation">}</span><br>              <span class="token punctuation">]</span><br>            <span class="token punctuation">}</span><br>          <span class="token punctuation">}</span><br>        <span class="token punctuation">]</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span><br><span class="token punctuation">}</span></code></pre>
<h4>Interpreterï¼ˆè§£é‡Šå™¨ï¼‰</h4>
<p>v8é‡Œçš„Interpreterå«åš <code>Ignition</code>
è§£é‡Šå™¨ä¼šéå† <code>AST</code> ï¼Œç”Ÿæˆ <code>byte code</code>ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œç­‰åˆ°å­—èŠ‚ç å…¨éƒ¨ç”Ÿæˆå®Œæ¯•ï¼Œé©¬ä¸Šå°±ä»å†…å­˜æ¸…é™¤ã€‚</p>
<p>è§£é‡Šå™¨å‡ºæ¥çš„ä»£ç å·²ç»å¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯æ²¡æœ‰ç»è¿‡ä¼˜åŒ–ï¼Œåªæ˜¯ä¸€è¡Œä¸€è¡Œå‚»å‚»çš„æ‰§è¡Œï¼Œç°åœ¨å¤§å¤šæ•°æµè§ˆå™¨jså†…æ ¸éƒ½ä½¿ç”¨JITæŠŠå®ƒç¼–è¯‘æˆ<code>optimized code</code>ï¼Œå¹¶ç»“åˆ<code>byte code</code>ï¼Œ å¯ä»¥å¤§å¤§ä¼˜åŒ–æ‰§è¡Œçš„æ•ˆç‡ã€‚</p>
<p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œ<code>byte code</code>å’Œ<code>optimized code</code>éƒ½æ˜¯æœ€åï¼ˆç»è¿‡ä¸€ç‚¹ç¼–è¯‘ï¼‰å¯ä»¥æ‰§è¡Œçš„ä»£ç ã€‚</p>
<blockquote>
<p><code>RUNTIME</code>ä¸‹æ–‡ä¼šè®²åˆ°</p>
</blockquote>
<h4>JIT Compiler(å®æ—¶ç¼–è¯‘ä¼˜åŒ–)</h4>
<p>ç°åœ¨è®¸å¤šæµè¡Œçš„ç¼–è¯‘å™¨éƒ½å®ç°äº†JIT(just-in-time compiler)ç¼–è¯‘å™¨ï¼Œv8çš„JITå«åš <code>TurboFan JIT</code>ï¼Œä»–å¯ä»¥åœ¨ <code>RUNTIME</code> å®æ—¶ç¼–è¯‘å‡ºä¼˜åŒ–çš„æœºå™¨ä»£ç ï¼ŒJITåˆ†ä»¥ä¸‹ä¸‰ä¸ªæ“ä½œ =&gt; <strong>ä¸‰ä¸ªæ“ä½œå„è‡ªå æœ‰è‡ªå·±çš„çº¿ç¨‹ï¼Œå¯å¼‚æ­¥æ‰§è¡Œ</strong></p>
<ul>
<li>
<p>Profilerï¼ˆç›‘è§†å™¨ï¼‰</p>
<p>åœ¨<code>RUNTIME</code>è¿‡ç¨‹ä¸­ï¼Œ<code>profiler</code>ä¼šç›‘æ§å’Œè®°å½•é‚£äº›éœ€è¦ä¼˜åŒ–çš„éƒ¨åˆ†ï¼Œä»¥ä¾¿æœ€åçš„ä¼˜åŒ–æ“ä½œ</p>
</li>
<li>
<p>Compiler (ç¼–è¯‘æˆæœºå™¨ç )</p>
<p>ä¹Ÿå«ç¿»è¯‘å™¨ï¼Œå°†ä¸Šæ–‡çš„ <code>byte code</code> ç¿»è¯‘æˆæœºå™¨èƒ½çœ‹æ‡‚çš„ <code>machine code</code>ã€‚</p>
</li>
<li>
<p>Optimized codeï¼ˆä¼˜åŒ–æœºå™¨ç ï¼‰</p>
<p>ç»“åˆprofilerçš„ä¿¡æ¯ä¼˜åŒ–æœºå™¨ç ï¼Œå‘é€ç»™compilesï¼Œæœ€ç»ˆå¾—åˆ°ä¼˜åŒ–åçš„ä»£ç </p>
</li>
</ul>
<p>ä»¥ä¸Šä¾¿æ˜¯è¯»å–ã€ç¼–è¯‘ä»£ç çš„æ•´ä¸ªæµç¨‹ï¼Œå¯ä»¥æ€»ç»“å¦‚ä¸‹</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAANCAIAAADTzFK5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACQklEQVQoz42S208aQRTG/acbHnwwlra2NUoTjVW0D72EmtJQrDVgGmyALWARlvsd5LbLbZll2dmd3WVn6CCl1caoX75MMpOT3zlzzlmaEkx0YABWabrh5Ue5w7TaxXild17gk5eDRB0wRcGX7WfaUn+skZmm1LdqacZCvMafSLmXUnoV1L6kc9GjcPnQn/fE6h6WOwy33jHNUGnIiSpZaDqd+1ZWxyvlN6TsM7F+lM5fzFneWP00yTnP245QK1IZ8iLChEb/Le5/HGURYiqm0jRGGWod8mAE6j2pyoPWQGwNQK07oB5KI6TJxIQ0eGaMCDZoHdcLXLo6r+5Xyeaa5TfRROuOQIbjQ832T6H/SxhE+X6kzAeb3RAASQNxBKvkQazJSBmlS+VPvsimh1lnU/Zk7k04s/f1whZM7VQvnarIEgMsevePdVNznN6DQrCQ2fL5LZ6zR2zUysafBi9WXYwlEF2p5LeU3g/a6HtY89ImWkcWgs2yPZNYY2Nr1fRmLfeqmLMlsuvVgk2o7OuUBVtkPoO7WQYd7pBBjfdaeU8r2FFpXy3souwOSm7rqe1J/sDkZ6zpQ1im3tX6ARh/PfZYpc8rku/5+PQJPHksv7VA57IW2Jw0vhPa/rtZi0+CyTCG4h/kbxvjwzXo24LeDeh+Ie0uyw6rxhyYXIgYwoN6T+eN5YZeYVDkWD1zIdaLosdqyK2cOJDfZRT9WKwSDO9j/VkRk5gq0QCGPTzuYqWPYRdLHSxyWO7Qd7qxNOb6rv4Grwt55hKLnuYAAAAASUVORK5CYII=" alt="" data-src="https://m.beetcb.com/postimg/15/1.png" class="lazyload" width="1280" height="676"></p>
<hr>
<h3>JS è¿è¡Œå¼•æ“</h3>
<p><code>RUNTIME</code> æ˜¯æŒ‡ js ä»£ç è¿è¡Œæ—¶çš„ç¯å¢ƒã€‚js å¼•æ“å‚ä¸ï¼ˆä¹Ÿå¤„åœ¨ï¼‰è¿™ä¸ªç¯å¢ƒä¸­ã€‚ç†è§£è¿™ä¸ªç¯å¢ƒå¯¹ js ä¸­çš„åŒæ­¥ä¸å¼‚æ­¥å¾ˆç”¨å¸®åŠ©</p>
<blockquote>
<p>æ¦‚æ‹¬ï¼š
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAIAAAD3FQHqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAE/0lEQVQ4y22Ue0xTdxTHf7ddSlIt4Ktz2dRkPhJH9u+2vxyTOuNIfEadvNSpQ9ctzvmoiF3MJqWYMVyYTBiU2mB5WEAYCoXSB+VVaC33FhBogb7u7b29heKGPMyy7LRDZ9y+OTn9/dr+Pvfc8zvnoKKiourq6ocPH+bn52dmZiYnJx84cCAlJSU1NTUjIyM1KtimpaWlp6fDN0ej+vTIkd179pw5c6agoKC5uVmtVt+8eRNVVFTodLqBgQEgXr9+/fTp02fPnr0UVVZWFniJRHLx4sXLEglss7Ozr0Z14fyFL8VimUym0WhwgtBqtaWlpaixsdFqtXq9XpPJBFx4TmFhYUlJiVKprKqqunfvHvy7Bj5qaipKSsry8n65Ki2+dq1QKs2XSMpycppLyxytrTqNRgWshoYGi8Xi8XgGBwdhAUSDwdDR0dHX14fj+OOoRkZGhnC8R12pzbpSd/jTxrT0pmPHm0+c1J482X7qlPmb8/elUkVe3hJrcnJydHR0eHh4KCo4DHSaDkxFFJoKT7Met7OszHbwYOf69f0bN+JbtxIJCbZNm3rfWmdJSGjau1d56RKqq6vr6emZfK7x8XGXyzUxMUGSJE0HGSZE0yEyEPI9drp+KBj5MHGYw3FyOB4ul+RyAxxOAMMoobAnKany3DlUW1trNpvhPID8fr/P53O73RAURVEMM0nTgxRp8ZG95IjO/+MVMvF9moNNI/QUoUWE/sSwv8ALhYNJSRpgQVohQfB2TqcTbuAFKxAgQ6FullVRpNTrz6bGzlM/JZPb3yYxxCI0i9ACQs8ABF4odLxgGY1GSNA/LGpJAYahwmHNTFg8FXo3GEqY8b8zXfwms3M5yUFBDM28ZL8LhfZXWGNjYxAOuSSKpsmZGcWTJ/unQjFMkBv2csO3MXYnAhaFIQZDdMSwIIaFha//DwtSDqF5IvL6/e5g8FeW3RcI8L3+GHqCxypfYzM4gS0YtRkjI8b1beH5N/OY9zb0H9xVc1nyKisK8vj8JMP46aDC5tpf188v0vNKdbxKBb9eGvvbsRUNGfH1aYLa1Dh1iqDiML/y2Ibyr3fd+u45CwoS8gX3yDAMywanpqafzISoGfX9iUNZ/YLdbTH72mOOaJd/1hifWbP68+pVJ6rij6tXpqhjD93lp9Ws+6p857dFF/6NC2qCZdnZ2dm5ubn5hYVnC3PkU/0tt3iHbT3fyOObeXF9y9bYV7xBrFmLrxYOrFz9aEWcbRnfHrNmaNW29m1fqMSR+oKOgZqAEgPW/Pz84uLi/ML8wtyc9w/8Z/b7j6kPYn3xAjJOEIhYLAkG23iBP05AxfJDy9bOrk10JIprxQjGRVtbG5R+b28vQRBQ9xCga9zlnnQPuQfLXeVil1g0tkPkFImcUT8mShoViZ7bRxPbP/ElH+0+KrkrQSqVqqWlpbOzE7oaGqAnKuhQ+yO7lbA22Btu47dzBnJycFnOgEyGy3Lx3FxCLifkuUQueJlDdmPohrxNLi+XIxgskC+Hw2G32202G0TX3d0NLFhbbdaOrg5Dp8HUbQIzdhnNFnMf3keMEI7RJSMi3tHa3npHdScyC+EdiagAByyIsTeqrq4ufbter9ObDCajwWjQG8wmc7+ln8AJB+542bQtWmW5EikUChiHEAucBA/3AGFCh+r1enjGgwcPmpqaYArDEIc1ZAN+6vqP6uvri4uL/waTVbN94GaJwAAAAABJRU5ErkJggg==" alt="" data-src="https://m.beetcb.com/postimg/15/2.png" class="lazyload" width="700" height="561"></p>
<ul>
<li>Memory Heap</li>
<li>Call Stack</li>
<li>Web APIs</li>
<li>Callback Queue</li>
<li>Event loop</li>
</ul>
</blockquote>
<p>å¦‚ä¸Š <code>RUNTIME</code> é‡Œä¸€å…±æœ‰äº”ä¸ªå®¹å™¨ã€‚å…¶å®åœ¨ä¸Šé¢å¤„ç†ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œjs å°±å·²ç»å°†å…¶ä¸åŒçš„ä»£ç æ”¾å…¥å¯¹åº”çš„å®¹å™¨ä¸­ã€‚</p>
<h4>Memory Heap</h4>
<p>å†…å­˜å †ï¼Œåœ¨å¤„ç†ä»£ç è¿‡ç¨‹ä¸­ï¼Œå‚¨å­˜å¯¹è±¡ç±»å‹å€¼</p>
<h4>Call Stack</h4>
<p>è°ƒç”¨æ ˆæ˜¯è¿½è¸ªå‡½æ•°æ‰§è¡Œæµçš„ä¸€ç§æœºåˆ¶ï¼Œåœ¨å¤„ç†ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å‡½æ•°æ‰§è¡Œå°±æ”¾åˆ°è°ƒç”¨æ ˆä¸­ã€‚æ¯ä¸ªè°ƒç”¨éƒ½åœ¨æ ˆä¸­å¼€è¾Ÿä¸€ä¸ªç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´å« <code>call frame</code> ï¼ˆè°ƒç”¨å¸§ï¼Œå‚¨å­˜å½“å‰å‡½æ•°çš„è°ƒç”¨ä½ç½®ã€å˜é‡ä¿¡æ¯ï¼‰</p>
<p>Call Stack æ»¡è¶³<a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)">æ ˆæ•°æ®ç»“æ„LIFO</a>çš„ç‰¹ç‚¹ã€‚</p>
<p>å®ƒåœ¨ <code>RUNTIME</code> é‡Œå¤„ç†çš„æœºåˆ¶æ˜¯ï¼›</p>
<ul>
<li>åœ¨å‡½æ•°è¢«æ”¾å…¥æ ˆä¸­æ—¶ï¼Œweb apisä¼šéªŒè¯å½“å‰å‡½æ•°æ˜¯å¦éœ€è¦ç­‰å¾…æ‰§è¡Œï¼Œå¦‚æœæ˜¯ï¼Œç«‹å³æŠ½å‡ºåŠ å…¥web apis</li>
<li>ä¸€æ—¦æœ‰ç«‹å³æ‰§è¡Œçš„å‡½æ•°è°ƒç”¨ï¼Œç«‹å³æ”¾å…¥æ ˆçš„å¤´éƒ¨</li>
<li>åœ¨å¤´éƒ¨çš„è°ƒç”¨ç«‹å³æ‰§è¡Œ</li>
<li>æ‰§è¡Œå®Œæ¯•çš„å‡½æ•°ç«‹å³ä»stackä¸­æ¸…é™¤</li>
<li>å½“è°ƒç”¨æ¬¡æ•°è¿‡å¤šæ—¶ä¼šå‘ç”Ÿ <code>stack overflow</code></li>
</ul>
<p>å› ä¸º js æ˜¯å•çº¿ç¨‹ï¼ˆ<code>single thread</code>ï¼‰çš„ï¼Œä»£ç è¿è¡ŒæœŸé—´åªèƒ½æœ‰ä¸€ä¸ª <code>call stack</code>ï¼Œä½†æ˜¯å› ä¸ºæœ‰äº†æœºåˆ¶çš„ç¬¬ä¸€æ¡ï¼Œjs æ‹¥æœ‰äº†å¼‚æ­¥å¤„ç†çš„èƒ½åŠ›ï¼›å…·ä½“å¤„ç†è¯·å¾€ä¸‹è¯»ã€‚</p>
<blockquote>
<p>è¡¥å……ï¼šcallstackå¯ä»¥åœ¨æµè§ˆå™¨çš„ <code>inspect -&gt; sources -&gt; callstack</code> ä½¿ç”¨ debug æŸ¥çœ‹è¿‡ç¨‹ã€‚</p>
</blockquote>
<h4>Web APIs</h4>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API">Web APIs</a> æ˜¯æµè§ˆå™¨æä¾›çš„æ¥å£ï¼Œjs è°ƒç”¨ååˆ†æ–¹ä¾¿, å¸¸ç”¨çš„æœ‰ <code>DOM</code> <code>CSSOM</code> <code>Timer</code> ç­‰ã€‚
åœ¨ <code>RUNTIME</code> é‡Œï¼ŒWeb APIsæœ‰åˆ©ç”¨<code>AJAX requests</code> ã€ <code>setTimeout</code> ã€ <code>DOM é‡Œçš„ EventTarget</code>ç­‰ç­‰å®Œæˆå¼‚æ­¥å¤„ç†ã€‚</p>
<p>web apisä¸æ–­éªŒè¯ç­‰å¾…æ‰§è¡Œçš„å‡½æ•°ï¼Œå½“ç­‰å¾…æ¡ä»¶ä¸åœ¨æ»¡è¶³æ—¶ï¼Œç«‹åˆ»æŠ½å‡ºå¹¶åŠ å…¥åˆ°<code>callback queue</code></p>
<h4>Callback Queue</h4>
<p>å›è°ƒé˜Ÿåˆ—ï¼ŒFIFOåŸåˆ™ï¼Œå…ˆè¿›å…ˆæ‰§è¡Œï¼Œå½“ <code>event loop</code> è§¦å‘åï¼Œå›è°ƒé˜Ÿåˆ—æ»¡è¶³FIFOçš„é‚£ä¸ªäº‹ä»¶è¢«æŠ½å‡ºï¼ŒåŠ å…¥åˆ° <code>call stack</code> ä¸­ã€‚</p>
<h4>Event Loop</h4>
<p>äº‹ä»¶å¾ªç¯ï¼Œå®ƒçš„ä»»åŠ¡æ˜¯ä¸æ–­æ£€æµ‹å½“å‰ <code>call stack</code> æ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºï¼Œè§¦å‘å›è°ƒé˜Ÿåˆ—</p>
<p>å®åˆ—æ¼”ç¤ºå¯ä»¥é€šè¿‡<a href="http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D"> Philip Robertâ€™s tool </a> å¾ˆæ–¹ä¾¿åœ°æŸ¥çœ‹åŠ¨ç”»æ¼”ç¤º</p>
<h3>JS åƒåœ¾å›æ”¶å¼•æ“(åªè¯´æ ‡è®°æ¸…é™¤)</h3>
<p>åƒåœ¾å›æ”¶ï¼ˆGarbage collectionï¼‰ä¸»è¦ç›®çš„æ˜¯æ¸…ç†å†…å­˜ï¼Œæé«˜è¿è¡Œé€Ÿåº¦
c è¯­è¨€æä¾›<code>malloc()</code> <code>free()</code>æ¥å®ç°æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼›
è€Œjs åƒåœ¾å›æ”¶æ˜¯è‡ªåŠ¨çš„ï¼Œå®ƒçš„æœºåˆ¶å°±æ˜¯ä»æ ¹å¯¹è±¡å¼€å§‹ï¼Œå‘ä¸‹å®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰<strong>ä¸å¯è¾¾</strong>çš„å¯¹è±¡ï¼Œæ˜¯åˆ™ä¸å†éœ€è¦ï¼Œåº”è¯¥å¯¹å…¶å›æ”¶ã€‚</p>
<h3>å…¶ä»–å¼•æ“</h3>
<p>åœ¨jsæœºåˆ¶ä¸­ï¼Œè¿˜æœ‰å…¶ä»–ç”¨äºä¼˜åŒ–çš„æœºåˆ¶ <code>shaps</code> <code>Inline Caches</code>ï¼Œç¬”è€…è¿˜æ²¡ç ”ç©¶ï¼Œåœ¨æ­¤ä¸å»æ·±å…¥ã€‚</p>
<p>å¯ä»¥å‚è€ƒ <a href="https://mathiasbynens.be/notes/shapes-ics">avaScript engine fundamentals: Shapes and Inline Caches</a> å»æ·±å…¥äº†è§£</p>
<p><a href="https://v8.dev/blog/turbofan-jit">Digging into the TurboFan JIT</a></p>
<p><a href="https://medium.com/@sanderdebr/a-brief-explanation-of-the-javascript-engine-and-runtime-a0c27cb1a397">A brief explanation of the Javascript Engine and Runtime</a></p>
<p><a href="https://blog.sessionstack.com/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code-ac089e62b12e">How JavaScript works: inside the V8 engine + 5 tips on how to write optimized code
</a></p>
<blockquote>
<p>æ¬¢è¿æŒ‡æ­£ã€è®¨è®º</p>
</blockquote>

	    </div>
		<div class="outline"></div>
		<div class="comment">
			<button id="show-comments" onclick="loadDisqus();return false;">Load/Post Comments ğŸ¤—</button>
			<div id="disqus_thread"></div>
		</div>
	</article>

	<script>
	var disqus_config = function () {
		this.page.url = "https://www.beetcb.com/posts/15/"
		this.page.identifier = "/posts/15/"
	};
	function loadDisqus() {
    var d = document,
      s = d.createElement('script'),
      load = document.getElementById('show-comments'),
      dot = 0

    // loading animation
    load.innerHTML = 'loading ' + 'â—¦' + ' ğŸ˜›'
    loadInterval = setInterval(() => {
      load.innerHTML = 'loading ' + 'â—¦'.repeat(dot + 2) + ' ğŸ˜›'
      dot === 1 ? (dot = -dot) : dot++
    }, 1000)

    s.async = true
    s.setAttribute('data-timestamp', +new Date())
    s.src = 'https://beets-blog.disqus.com/embed.js'
    ;(d.head || d.body).appendChild(s)

    function listen(target, event, callback) {
      return target.addEventListener(event, callback)
    }

    // check the comment loadding process
    let commentPromise = new Promise((resolve, reject) => {
      listen(s, 'load', resolve)
      listen(s, 'error', reject)
    })
    commentPromise
      .then(() => {
        clearInterval(loadInterval)
        s.removeEventListener('load', arguments.callee)
        load.innerHTML = 'loadding completed ğŸ˜'
        setTimeout(() => (load.style.display = 'none'), 1000)
      })
      .catch(() => {
        clearInterval(loadInterval)
        s.removeEventListener('load', arguments.callee)
        load.innerHTML = 'ğŸ¶ OOPSï¼Try to use Proxy?'
      })
  }	
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                     
     
		</main>
		<footer class="footer">
		    <div class="footer-desc">
			made with love&amp;<a style="color: skyblue;" href="https://www.11ty.dev/" target="_blank">11ty</a> by beet <br> 
			<a href="http://www.beian.miit.gov.cn/" target="_blank">ICP-20003648-1</a>
		    </div>
		</footer>
	    <script>
            (function (selector, src, preferNativeLazyLoad) {
  var images = document.querySelectorAll(selector);
  var numImages = images.length;

  if (numImages > 0) {
    if (preferNativeLazyLoad && 'loading' in HTMLImageElement.prototype) {
      for (var i = 0; i < numImages; i++) {
        var keys = ['src', 'srcset'];

        for (var j = 0; j < keys.length; j++) {
          if (images[i].hasAttribute('data-' + keys[j])) {
            var value = images[i].getAttribute('data-' + keys[j]);
            images[i].setAttribute(keys[j], value);
          }
        }
      }

      return;
    }

    var script = document.createElement('script');
    script.async = true;
    script.src = src;
    document.body.appendChild(script);
  }
})(
              'img',
              'https://m.beetcb.com/lib/lazysizes.min.js',
              false
            );
          </script></body></html>