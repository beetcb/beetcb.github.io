<!DOCTYPE html>
      <html><head>
	    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>è¯»Openssh Manual | Beet's blog, a frontEnd lover's blog site</title>
    <link type="text/css" rel="stylesheet" href="/static/main.css">
		<meta name="description" content=" Beet's blog, share & blogging">
		<meta name="title" content="è¯»Openssh Manual | Beet's blog, a frontEnd lover's blog site">
		<meta property="og:site_name" content="beet's blog">
		<meta property="og:url" content="https://www.beetcb.com/">
		<meta property="og:type" content="website">
		<meta property="og:title" content="è¯»Openssh Manual | Beet's blog, a frontEnd lover's blog site">
		<meta property="og:description" content=" Beet's blog, share & blogging">
	    <link rel="icon" href="/static/assets/favicon.ico">
	    
	    
      <script src="/static/main.js" defer></script>
      <script src="https://cdn.jsdelivr.net/npm/turbolinks@5.2.0/dist/turbolinks.min.js"></script>
	  </head><body>
	    <main class="main">
		
	<article class="article">
	    <h1 class="title">è¯»Openssh Manual</h1>
	    <div class="location content">
		<a href="/">Home</a> /posts/17/<br>
		<time datetime="Posted date: 2020 Aug 04">Posted date: 2020 Aug 04</time>
	    </div>
	    <div class="content">
		<blockquote>
<p>ç¬¬ä¸€æ¬¡å»æ·±å…¥äº†è§£ openssh ï¼Œæ­¤ç¯‡æ˜¯æˆ‘çš„å­¦ä¹ ç¬”è®°ã€‚æœ¬æ–‡ä½¿ç”¨çš„ ip åœ°å€å‡æ›¿æ¢æˆäº†æŸå‚ CDN åœ°å€ï¼Œæ‰€ä»¥çƒ­å¿ƒçš„æœ‹å‹ä¸å¿…å»å°è¯• ** å•¦ (âœ¿â—¡â€¿â—¡) ã€‚</p>
</blockquote>
<h3>Openssh æ¦‚è§ˆ</h3>
<p><strong><a href="https://en.wikipedia.org/wiki/Secure_Shell"><code>ssh</code></a>ï¼ˆsecure shellï¼‰ æ˜¯ä¸€ç§åŠ å¯†çš„ç½‘ç»œä¼ è¾“åè®®ã€‚</strong></p>
<p>ä¸ºå®ç°æœåŠ¡å™¨çš„è¿œè·ç¦»è®¿é—®å’Œä¿¡æ¯ä¼ è¾“ï¼Œæœ€åˆçš„ <code>telnet</code> åè®®è¯ç”Ÿã€‚ä½†æ˜¯ä¼ è¾“çš„æ˜æ–‡ä¿¡æ¯æš´éœ²åœ¨ç½‘ç»œï¼Œ(è‹¥å¯†ç ä¸å¯é )å¾ˆå®¹æ˜“è¢«ç›‘å¬ï¼Œä½¿å¾— <code>telnet</code> åè®®å¹¶ä¸å®‰å…¨ã€‚</p>
<p>è‡ªç„¶ï¼Œ<code>ssh</code> ä»¥å…¶å®‰å…¨æ€§æ›¿ä»£äº† <code>telnet</code> ï¼Œå¯¹è¿œç¨‹è¿æ¥è¿›è¡Œèº«ä»½éªŒè¯ã€å†…å®¹åŠ å¯†ã€‚</p>
<p><code>Openssh</code> æ˜¯å¯¹ ssh åè®®å¼€æºçš„å®ç°ï¼Œè¿˜é›†æˆäº†è®¸å¤šå·¥å…·ã€‚å…¶åŸºæœ¬åŠŸèƒ½æ˜¯ç™»é™†è¿œç«¯æœåŠ¡å™¨ï¼Œæ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚</p>
<p><code>Openssh</code> åœ¨å„å¤§æ“ä½œç³»ç»Ÿå¹¿æ³›æ”¯æŒï¼ˆå†…ç½®ï¼‰ï¼ŒåŒ…æ‹¬ win10ï¼ˆ1809 åï¼‰ã€macOSã€Linux ç­‰ã€‚æ‰€ä»¥ï¼Œå‰æ–‡æ‰€è¯´çš„<strong>æœåŠ¡å™¨</strong>ï¼Œä¹Ÿå¯ä»¥æ™®é€‚åˆ°<strong>ç»å¤§å¤šæ•°ç”µè„‘</strong></p>
<hr>
<h3>Openssh ä¸‰ç±»å·¥å…·</h3>
<h3>1.è¿œç¨‹æ“ä½œå·¥å…·</h3>
<h4>a.<code>ssh</code>:è¿œç¨‹ç™»é™†å®¢æˆ·ç«¯</h4>
<ul>
<li>
<p>ä½œç”¨</p>
<p>è¿œç¨‹ç™»é™†æ‰§è¡Œå‘½ä»¤(è¿˜å¯æŠŠè¿œç«¯æ‰§è¡Œçš„å‘½ä»¤ç»“æœè¿”å›å®¢æˆ·ç«¯è¾“å‡º)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒSSH ä¹Ÿæ”¯æŒéš§é“åè®®ã€ç«¯å£æ˜ å°„å’Œ X11 è¿æ¥ã€‚</p>
</li>
<li>
<p>èº«ä»½éªŒè¯æ–¹å¼ï¼ˆå¯†ç å’Œå¯†é’¥ï¼‰</p>
<p>1.å¯†ç éªŒè¯</p>
<p>å¯†ç éªŒè¯é‡‡ç”¨æ™®é€šçš„ <code>ç”¨æˆ·å+å¯†ç </code> éªŒè¯æ–¹å¼, éœ€è¦æ‰‹åŠ¨è¾“å…¥å¯†ç </p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># ä¸å½“å‰å®¢æˆ·ç«¯ç”¨æˆ·ååŒ¹é…</span><br><span class="token function">ssh</span> <span class="token number">221.236</span>.11.90<br><span class="token comment"># ä½¿ç”¨æŒ‡å®šçš„ç”¨æˆ·åroot</span><br><span class="token function">ssh</span> root@221.236.11.90</code></pre>
<p>2.å¯†é’¥éªŒè¯</p>
<p>å¯†é’¥éªŒè¯ä½¿ç”¨ä¸å¯¹ç§°çš„ <code>å…¬é’¥ã€ç§é’¥</code> è¿›è¡ŒéªŒè¯ï¼Œå…¬é’¥éœ€è¦æå‰æ”¾åˆ°æœåŠ¡ç«¯ç”µè„‘ä¸­ï¼Œç§é’¥è‡ªå·±ä¿ç®¡ã€‚</p>
<p>å…¬é’¥ä¸å¤ªé‡è¦ï¼Œç§é’¥æœ€é‡è¦ï¼Œä½¿ç”¨å¯†é’¥éªŒè¯æ—¶ä¸éœ€è¦è¾“å…¥å¯†ç (ä½¿ç”¨ç§é’¥å¯†ç  <code>passphrase</code> åˆ—å¤–)</p>
<p>æ‹¿ github çš„ ssh é…ç½®ä¸¾ä¸ªæ —å­</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># ä½¿ç”¨ssh-keygen ç”Ÿæˆå¯†é’¥ï¼Œä¼šæç¤ºå…¬é’¥çš„ä¿å­˜ä½ç½®</span><br>ssh-keygen -t rsa -b <span class="token number">4096</span> -C <span class="token string">"zhparnex@gmail.com"</span> <span class="token comment"># è¾“å…¥passphraseæˆ–è€…ç•™ç©º</span><br><br><span class="token comment"># æŸ¥çœ‹å…¬é’¥id_rsa.pub</span><br><span class="token function">cat</span> ~/id_rsa.pub <span class="token comment"># ç„¶åå°†å…¬é’¥æ·»åŠ åˆ°githubè´¦å·</span><br><br><span class="token comment"># ä½¿ç”¨sshè¿›è¡Œgit cloneæ“ä½œ</span><br><span class="token function">git</span> clone git@github.com:beetcb/blog-backup.git</code></pre>
<p>3.æ‰§è¡Œè¿”å›ï¼Œä¸è¿›å…¥è¿œç«¯ shell</p>
<p>åœ¨<code>ssh 221.236.11.90</code>åé¢è¿½åŠ éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¸è¿›å…¥è¿œç«¯ shell, å°†è¿œç«¯ output ä¼ è¾“åˆ°æœ¬åœ°å®¢æˆ·ç«¯æ¥ outputã€‚ä¹Ÿæ”¯æŒæ ‡å‡†è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯çš„é‡å®šå‘ï¼Œä¸‹é¢æ˜¯å‡ ä¸ªå®ç”¨é‡å®šå‘æ“ä½œ(å¯ä»¥ä½¿ç”¨ pipeline)ã€‚</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># ç®€å•çš„è¾“å‡ºé‡å®šå‘</span><br><span class="token function">ssh</span> <span class="token number">221.236</span>.11.90 <span class="token function">ls</span> -Alh <span class="token operator"><span class="token file-descriptor important">1</span>></span>ls.log <span class="token comment"># æ•°å­—1å¯çœç•¥</span><br><br><span class="token comment"># åˆ©ç”¨è¾“å‡ºé‡å®šå‘æ¥æ”¶æ–‡ä»¶</span><br><span class="token function">ssh</span> <span class="token number">221.236</span>.11.90 <span class="token string">'cat remotefile.zip'</span> <span class="token operator"><span class="token file-descriptor important">1</span>></span> <span class="token function">pv</span> filefromremote.zip<br><br><span class="token comment"># åˆ©ç”¨è¾“å…¥é‡å®šå‘å‘é€æ–‡ä»¶</span><br><span class="token function">ssh</span> <span class="token number">221.236</span>.11.90 <span class="token function">cat</span> <span class="token operator"><span class="token file-descriptor important">1</span>></span> filefromlocal.zip <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span> localfile.zip <span class="token comment"># å¯ä»¥çœç•¥0</span><br><br><span class="token comment"># å‘é€æ¥æ”¶æ–‡ä»¶å¤¹æˆ–å¤šä¸ªæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨pipelineç®€åŒ–æ“ä½œ</span><br><span class="token function">ssh</span> <span class="token number">221.236</span>.11.90 <span class="token function">tar</span> Jc bin/* <span class="token operator">|</span> <span class="token function">tar</span> xJ<br><span class="token function">tar</span> Jc bin/* <span class="token operator">|</span> <span class="token function">ssh</span> -v <span class="token number">221.236</span>.11.90 <span class="token function">tar</span> xJ</code></pre>
</li>
<li>
<p><code>ssh [option]</code>é€‰é¡¹ä¸€è§’</p>
<p>é€‰é¡¹å¾ˆå¤šï¼Œå¿˜è®°æ—¶å°±æŸ¥é˜… manualï¼Œåˆ—å‡ºå‡ ä¸ªå¸¸ç”¨çš„ï¼š</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># æŒ‡å®šsshè‡ªå®šä¹‰ç«¯å£</span><br><span class="token function">ssh</span> -p <span class="token number">2222</span> <span class="token number">221.236</span>.11.90 <span class="token comment"># ç«¯å£éœ€è¦åœ¨æœåŠ¡ç«¯ä¿®æ”¹`sshd_config`æ–‡ä»¶</span><br><br><span class="token comment"># ssh æŒ‡å®šç”¨æˆ·åçš„å¦ä¸€ç§å†™æ³•</span><br><span class="token function">ssh</span> -l root <span class="token number">221.236</span>.11.90<br><br><span class="token comment"># debug</span><br><span class="token function">ssh</span> -v <span class="token number">221.236</span>.11.90<br><span class="token comment">## debugæ›´æ”¹è¾“å‡ºé¿å…æ±¡æŸ“æ§åˆ¶å°</span><br><span class="token function">ssh</span> -v <span class="token number">221.236</span>.11.90 <span class="token operator"><span class="token file-descriptor important">2</span>></span>debug.log<br><span class="token comment">### or</span><br><span class="token function">ssh</span> -v -E debug.log <span class="token number">221.236</span>.11.90<br><span class="token comment">## æŸ¥çœ‹Exit status</span><br><span class="token function">ssh</span> -v <span class="token number">221.236</span>.11.90 <span class="token function">ls</span> -Ah <span class="token operator"><span class="token file-descriptor important">2</span>></span>debug.log<span class="token operator">&amp;&amp;</span><span class="token function">cat</span> debug.log <span class="token operator">|</span> <span class="token function">grep</span>  <span class="token string">' Exit status'</span><br><span class="token comment">## ä»…æŸ¥çœ‹debugä¿¡æ¯ï¼Œæ›¿ä»£è¾“å‡º</span><br><span class="token function">ssh</span> -v <span class="token number">221.236</span>.11.90 <span class="token function">ls</span> -Ah <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span><br><br><span class="token comment"># å‹ç¼©ä¼ è¾“[é€‚åˆä¸‹è¡Œå°çš„æœºå™¨]</span><br><span class="token function">scp</span> -C debug.log <span class="token number">221.236</span>.11.90:. <span class="token comment"># é‡‡ç”¨gzipå‹ç¼©ç®—æ³•ï¼Œå¦‚æœç½‘é€Ÿå¾ˆå¿«ï¼Œä¼šé™ä½ä¼ è¾“é€Ÿåº¦</span><br><br><span class="token comment"># å®‰é™æ¨¡å¼</span><br><span class="token function">scp</span> -q <span class="token number">2222</span> debug.log <span class="token number">221.236</span>.11.90:.</code></pre>
</li>
</ul>
<h4>b.<code>scp</code>å’Œ<code>sftp</code>:åŠ å¯†æ–‡ä»¶ä¼ è¾“</h4>
<p><code>scp</code> å¯æ›¿ä»£ rcp ï¼Œä½¿ç”¨ ssh ä¼ è¾“å’ŒåŠ å¯†æ–‡ä»¶ã€‚scp ä¸ ssh æ›´æ”¹è¾“å…¥è¾“å‡ºä¼ è¾“ä¼ è¾“ç›¸æ¯”ï¼Œscp æœ‰è¿›åº¦æ¡ã€ç½‘é€Ÿæ˜¾ç¤ºï¼Œè€Œä¸”æ“ä½œæ›´ç®€å•ã€å¤šæ–‡ä»¶æˆ–ç›®å½•ä¹Ÿä¸éœ€è¦å‹ç¼©å†ä¼ è¾“ï¼ˆå½“ç„¶ ssh æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨ pvï¼‰</p>
<p>scp çš„åŸºæœ¬æ ¼å¼ï¼š</p>
<p><code>scp -[options] [arguments] &lt;push location&gt; &lt;pull location&gt;</code></p>
<p><code>scp</code> å¤§éƒ¨åˆ†å‚æ•°ç»§æ‰¿ ssh å‚æ•°ï¼ˆ<code>-p</code>æ”¹å˜ï¼‰ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># å½“å‰ç›®å½•åœ°æ–‡ä»¶ä¼ åˆ°è¿œç«¯$HOMEç›®å½•</span><br><span class="token function">scp</span> debug.log <span class="token number">221.236</span>.11.90:. <span class="token comment"># è¿œç«¯ç›®å½•ç”¨ user@host:/tem/ è¡¨ç¤º</span><br><br><span class="token comment"># è¿œç«¯$HOMEç›®å½•æ–‡ä»¶æ‹‰å–åˆ°æœ¬åœ°å½“å‰ç›®å½•</span><br><span class="token function">scp</span> root@221.236.11.90:node.zip <span class="token builtin class-name">.</span><br><br><span class="token comment"># ç›®å½•ä¼ è¾“</span><br><span class="token function">scp</span> -r root@221.236.11.90:Downloads <span class="token builtin class-name">.</span> <span class="token comment"># tab é”®å¯ä»¥å®ç°è¿œç«¯ç›®å½•è¡¥å…¨</span><br><br><span class="token comment"># æŒ‡å®šç«¯å£</span><br><span class="token function">scp</span> -P <span class="token number">2222</span> debug.log <span class="token number">221.236</span>.11.90:.<br><br><span class="token comment"># ä¿ç•™æ–‡ä»¶ä¿®æ”¹æ¬¡æ•°</span><br><span class="token function">scp</span> -p <span class="token number">2222</span> debug.log <span class="token number">221.236</span>.11.90:.</code></pre>
<p><code>sftp</code> å¯æ›¿ä»£ ftp ï¼Œä½¿ç”¨ ftp + ssh ä¼ è¾“æ–‡ä»¶ï¼Œæœ‰ ftp çš„åŠŸèƒ½ï¼Œssh çš„ç‰¹æ€§ã€‚ä¸ scp ç›¸æ¯”ï¼Œsftp æœ‰æ“ä½œæ–‡ä»¶çš„èƒ½åŠ›ï¼Œè€Œ scp åªèƒ½å¤åˆ¶æ–‡ä»¶ï¼›å¦å¤– sftp å¯ä»¥äº¤äº’çš„ï¼Œè¿›å…¥äº¤äº’æ¨¡å¼ä»¥åï¼Œå¯ä»¥è¿›è¡ŒåŸºæœ¬çš„æ–‡ä»¶ç®¡ç†æ“ä½œã€‚</p>
<p>åŒæ ·ï¼Œ<code>sftp</code> å¤§éƒ¨åˆ†å‚æ•°ç»§æ‰¿ ssh å‚æ•°ï¼ˆ<code>-p</code>æ”¹å˜ï¼Œç±»ä¼¼äº <code>scp</code>ï¼‰ã€‚æ­¤å¤–ï¼Œåœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œè¿˜æœ‰å®ƒè‡ªå·±çš„ä¸€äº›å‘½ä»¤åŠå‚æ•°ï¼ˆè¾“å…¥<code>help</code>è·å¾—æç¤ºï¼‰ï¼Œä¸‹é¢æ˜¯å‡ ä¸ªæˆ‘äº†è§£çš„ï¼š</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># é¦–å…ˆè¿›å…¥sftpäº¤äº’æ¨¡å¼</span><br><span class="token function">sftp</span> <span class="token number">221.236</span>.11.90<br><br><span class="token comment"># ls cd ç”¨äºå¯¼èˆª</span><br>sftp<span class="token operator">></span> <span class="token function">ls</span><br><br><span class="token comment"># ä¸‹è½½æ–‡ä»¶(å¤¹)åˆ°localè¿›å…¥sftpæ¨¡å¼çš„ç›®å½•</span><br>sftp<span class="token operator">></span> get file1.zip file2.zip<br>sftp<span class="token operator">></span> get -r remote_directory<br><br><span class="token comment"># ä¸Šä¼ æ–‡ä»¶ï¼ˆå¤¹ï¼‰=> ä»localè¿›å…¥çš„ç›®å½•</span><br>sftp<span class="token operator">></span> put file1.zip file2.zip<br>sftp<span class="token operator">></span> put -r local_directory<br>sftp<span class="token operator">></span> put /file1.zip /file2.zip <span class="token comment"># ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br><br><span class="token comment"># å¦‚æœget å’Œ put å¤±è´¥ï¼Œå¯ä»¥é‡è¯•</span><br>sftp<span class="token operator">></span> reget -r remote_directory<br>sftp<span class="token operator">></span> reput -r local_directory</code></pre>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç±»ä¼¼äº linux çš„å‘½ä»¤ï¼ˆä¸‹é¢çš„ comment ä½¿ç”¨ linux å‘½ä»¤ï¼‰</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># df mkdir rm chmod chown chgrp => same</span><br><br><span class="token comment"># mv(change name) => rename</span><br><span class="token function">rename</span> file.zip renamedFile.zip<br><span class="token comment"># exit => bye or exit</span><br><span class="token builtin class-name">exit</span><br>bye<br><span class="token comment"># 'manual' => help</span><br><span class="token builtin class-name">help</span> <span class="token comment"># æ˜¾ç¤ºå¸®åŠ©æ‰‹å†Œ</span><br><span class="token comment"># ls (local) pwd (local) mkdir (local)=> add prefix `l`(local)</span><br>lcd ~ <span class="token comment"># æ”¹å˜æœ¬åœ°ç›®å½•</span><br>lls <span class="token comment"># åˆ—å‡ºæœ¬åœ°ç›®å½•</span><br>lpwd <span class="token comment"># æ˜¾ç¤ºæœ¬åœ°å·¥ä½œç›®å½•</span><br>lmkdir dirLocal <span class="token comment"># åœ¨æœ¬åœ°åˆ›å»ºæ–‡ä»¶å¤¹</span></code></pre>
<p>å¥½äº†ï¼Œè¿™å°±æ˜¯åˆ©ç”¨ Openssh è¿›è¡Œè¿œç¨‹æ“ä½œçš„å·¥å…·äº†ï¼Œå…¶æ·±å…¥åŠŸèƒ½è¿˜æœ‰å¾ˆå¤šæ²¡æœ‰åˆ—å‡ºï¼Œéœ€è¦æŒç»­å­¦ä¹ ã€‚</p>
<h3>2.å¯†é’¥ç®¡ç†å·¥å…·</h3>
<h4>a.ssh-keygen</h4>
<p><code>ssh-keygen</code>ä¸»è¦ç”¨äºç”Ÿæˆå¯†é’¥å¯¹ï¼ˆä¹Ÿèƒ½ç®¡ç†è½¬æ¢å¯†é’¥ï¼‰ï¼Œä¸€ä¸ªç”Ÿæˆè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<pre class="language-bash"><code class="language-bash">~ ssh-keygen<br>Generating public/private rsa key pair.<br>Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/home/ylo/.ssh/id_rsa<span class="token punctuation">)</span>:<br>Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:<br>Enter same passphrase again:<br>Your identification has been saved <span class="token keyword">in</span> /home/ylo/.ssh/id_rsa.<br>Your public key has been saved <span class="token keyword">in</span> /home/ylo/.ssh/id_rsa.pub.<br>The key fingerprint is:<br>SHA256:Up6KjbnEV4Hgfo75YM393QdQsK3Z0aTNBz0DoirrW+c ylo@klar<br>The key's randomart image is:<br>+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+<br><span class="token operator">|</span>    <span class="token builtin class-name">.</span>      <span class="token punctuation">..</span>oo<span class="token punctuation">..</span><span class="token operator">|</span><br><span class="token operator">|</span>   <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>  <span class="token builtin class-name">.</span> .o.X.<span class="token operator">|</span><br><span class="token operator">|</span>    <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> o.  <span class="token punctuation">..</span>+ B<span class="token operator">|</span><br><span class="token operator">|</span>   <span class="token builtin class-name">.</span>   o.o  .+ <span class="token punctuation">..</span><span class="token operator">|</span><br><span class="token operator">|</span>    <span class="token punctuation">..</span>o.S   o<span class="token punctuation">..</span>  <span class="token operator">|</span><br><span class="token operator">|</span>   <span class="token builtin class-name">.</span> %o<span class="token operator">=</span>      <span class="token builtin class-name">.</span>  <span class="token operator">|</span><br><span class="token operator">|</span>    @.B<span class="token punctuation">..</span>.     <span class="token builtin class-name">.</span> <span class="token operator">|</span><br><span class="token operator">|</span>   o.<span class="token operator">=</span>. o. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>  <span class="token builtin class-name">.</span><span class="token operator">|</span><br><span class="token operator">|</span>    .oo  E. <span class="token builtin class-name">.</span> <span class="token punctuation">..</span> <span class="token operator">|</span><br>+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+<br>klar <span class="token punctuation">(</span><span class="token number">11</span>:40<span class="token punctuation">)</span> ~<span class="token operator">></span></code></pre>
<p>è¿‡ç¨‹ä¸­æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼š</p>
<ul>
<li>
<p>é€‰æ‹©å¯†é’¥ä¿å­˜ä½ç½®ï¼Œä¸€èˆ¬ä¿æŒé»˜è®¤</p>
<p><code>Enter file in which to save the key (/home/ylo/.ssh/id_rsa):</code></p>
<p>åŒæ—¶å¯ä»¥æŒ‡å®šæ–‡ä»¶å</p>
</li>
<li>
<p><code>passphrase</code>ç§é’¥å¯†ç </p>
<p><code>Enter passphrase (empty for no passphrase):</code></p>
<p>ç•™ç©ºåˆ™ä¸è®¾å®šç§é’¥å¯†ç ï¼Œ<code>passphrase</code> æ˜¯æ¨èä½¿ç”¨çš„ï¼Œå¦‚æœè§‰å¾—æ¯æ¬¡è¿æ¥è¾“å…¥å¯†ç éº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>ssh-add</code> <code>ssh-agent</code> ç®¡ç†å¯†é’¥[å‚è§ä¸‹æ–‡]ã€‚</p>
</li>
</ul>
<p>é€‰é¡¹ï¼š</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># æŒ‡å®šç”Ÿæˆç®—æ³•</span><br>ssh-keygen -t dsa <span class="token comment"># defaultï¼šrsa</span><br><span class="token comment"># æŒ‡å®šç”Ÿæˆå¤§å°</span><br>ssh-keygen -b <span class="token number">4096</span> <span class="token comment"># default: 2048</span><br><span class="token comment"># æå‰æŒ‡å®šå‚¨å­˜ä½ç½®å’Œæ–‡ä»¶å</span><br>ssh-keygen -f ~/tatu-key-ecdsa -t ecdsa -b <span class="token number">521</span><br><span class="token comment"># æŠŠå…¬é’¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œå†™å…¥ authorized_keys  æ–‡ä»¶</span><br>ssh-copy-id -i <span class="token number">221.236</span>.11.90 <span class="token comment"># å¦‚æœä½¿ç”¨è‡ªå®šä¹‰è®¾ç½®ï¼Œéœ€è¦æŒ‡å®šå¯†é’¥ä½ç½®</span><br><span class="token comment"># æµ‹è¯•æ˜¯å¦è¿é€šæˆåŠŸ</span><br><span class="token function">ssh</span> -i <span class="token number">221.236</span>.11.90</code></pre>
<blockquote>
<p><code>ssh-copy-id</code> æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<p>The command edits the authorized_keys file on the server. It creates the .ssh directory if it doesn't exist. It creates the authorized keys file if it doesn't exist. Effectively, ssh key copied to server.</p>
<p>It also checks if the key already exists on the server. Unless the -f option is given, each key is only added to the authorized keys file once.</p>
<p>It further ensures that the key files have appropriate permissions. Generally, the user's home directory or any file or directory containing keys files should not be writable by anyone else. Otherwise someone else could add new authorized keys for the user and gain access. Private key files should not be readable by anyone else.</p>
</blockquote>
<h4>b.ssh-add</h4>
<blockquote>
<p>å»ºè®®å…ˆäº†è§£<code>ssh-agent</code>ï¼Œåˆå§‹çš„ ssh-agent å¹¶æ²¡æœ‰å‚¨å­˜ç§é’¥</p>
</blockquote>
<p><code>ssh-add</code> çš„ä½œç”¨å°±æ˜¯æŠŠç§é’¥åŠ å…¥ <code>ssh-agent</code> ä»£ä¸ºç®¡ç†ï¼Œè¿™æ ·ç§é’¥å°±ä¼šå‚¨å­˜åˆ°å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç‰©ç†ç£ç›˜ä¸­ã€‚ï¼ˆ<code>ssh-add</code> ä¹Ÿå¯ä»¥ä» <code>ssh-agent</code> ç§»é™¤ç§é’¥ ï¼‰</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># æŠŠé»˜è®¤çš„ç§é’¥åŠ å…¥ssh-agentç®¡ç†</span><br>ssh-add<br><span class="token comment"># ç§»é™¤ç§é’¥</span><br>ssh-add -d</code></pre>
<h4>c.ssh-keysign</h4>
<p><code>ssh-keysign</code> æ˜¯ç”¨äºä¸»æœºéªŒè¯çš„å¸®åŠ©ç¨‹åºï¼Œé»˜è®¤å…³é—­çŠ¶æ€ï¼Œéœ€è¦ä¿®æ”¹ ssh é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨å‡ ç‡ä¸å¤§ï¼ˆæˆ‘å°±å·æ‡’ç•¥è¿‡äº†ï¼‰</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># modify /etc/ssh/ssh_config</span><br>HostbasedAuthentication <span class="token function">yes</span></code></pre>
<h4>d.ssh-keyscan</h4>
<p><code>ssh-keyscan</code> å¯æ‰«ææ”¶é›†è¿œç«¯æœåŠ¡å™¨çš„å…¬é’¥ä¿¡æ¯ã€‚ä¸»è¦ç”¨æ¥æå‰éªŒè¯è®¾å¤‡æŒ‡çº¹ï¼ŒåŠ å…¥ <code>known_hosts</code>ã€‚
ç®€å•æ¥è¯´å°±æ˜¯æˆ‘ä»¬åœ¨è¿æ¥æ–°è¿œç«¯ä¸»æœºæ—¶ï¼Œä¼šå‡ºç°ä¸‹é¢çš„æŒ‡çº¹éªŒè¯æç¤ºï¼š</p>
<pre class="language-bash"><code class="language-bash">The authenticity of <span class="token function">host</span> <span class="token string">'221.236.11.90 (221.236.11.90)'</span> can't be established.<br>ECDSA key fingerprint is SHA256:kkX7M+KBwxX/Lz438A/ik/hvNkLFQbhqOfgUctr2UpI.<br>Are you sure you want to <span class="token builtin class-name">continue</span> connecting <span class="token punctuation">(</span>yes/no/<span class="token punctuation">[</span>fingerprint<span class="token punctuation">]</span><span class="token punctuation">)</span>?</code></pre>
<p>å¿…é¡»è¾“å…¥ <code>yes</code> æ‰èƒ½ç»§ç»­è¿æ¥ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ­£åœ¨å†™ä¸€ä¸ª shell è„šæœ¬ï¼ŒåŠŸèƒ½æ˜¯éå†ä¸€ç¾¤ä¸»æœºï¼Œæœ‰äº›æ˜¯æ²¡æœ‰éªŒè¯æŒ‡çº¹çš„ã€‚åœ¨ shell è„šæœ¬é‡Œä¸å¯èƒ½è¾“å…¥ <code>yes</code>ï¼Œéœ€è¦ç”¨ <code>ssh-keyscan</code> æå‰è·å–æŒ‡çº¹å†™å…¥ <code>known_hosts</code> æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># in script.sh</span><br>ssh-keyscan <span class="token variable">$2</span> <span class="token operator">>></span> ~/.ssh/known_hosts<br><span class="token function">ssh</span> <span class="token variable">$1</span>@<span class="token variable">$2</span><br><span class="token comment"># back to terminal</span><br>./script.sh root <span class="token number">221.236</span>.11.90</code></pre>
<p>ä¸‹é¢æ˜¯åœ¨å‘½ä»¤å«è¾“å‡ºçš„ä¸€ä¸ªå±•ç¤ºï¼š</p>
<pre class="language-bash"><code class="language-bash">~<br>â–³ <span class="token function">ssh</span> root@221.236.11.90<br>The authenticity of <span class="token function">host</span> <span class="token string">'221.236.11.90 (221.236.11.90)'</span> can't be established.<br>ECDSA key fingerprint is SHA256:kkX7M+KBwxX/Lz438A/ik/hvNkLFQbhqOfgUctr2UpI.<br>Are you sure you want to <span class="token builtin class-name">continue</span> connecting <span class="token punctuation">(</span>yes/no/<span class="token punctuation">[</span>fingerprint<span class="token punctuation">]</span><span class="token punctuation">)</span>? no<br>Host key verification failed.<br><br>~<br>â–² <span class="token function">cat</span> ~/script.sh<br><span class="token comment">#!/bin/bash</span><br>ssh-keyscan <span class="token variable">$2</span> <span class="token operator">>></span> ~/.ssh/known_hosts<br><span class="token function">ssh</span> <span class="token variable">$1</span>@<span class="token variable">$2</span><br><br>~<br>â–³  ./script.sh root <span class="token number">221.236</span>.11.90<br><span class="token comment"># 221.236.11.90:22 SSH-2.0-OpenSSH_7.4</span><br><span class="token comment"># 221.236.11.90:22 SSH-2.0-OpenSSH_7.4</span><br><span class="token comment"># 221.236.11.90:22 SSH-2.0-OpenSSH_7.4</span><br><span class="token comment"># 221.236.11.90:22 SSH-2.0-OpenSSH_7.4</span><br><span class="token comment"># 221.236.11.90:22 SSH-2.0-OpenSSH_7.4</span><br>Last login: Fri Aug  <span class="token number">7</span> <span class="token number">11</span>:41:44 <span class="token number">2020</span> from <span class="token number">43.227</span>.139.30<br><br>Welcome to Alibaba Cloud Elastic Compute Service <span class="token operator">!</span><br><br><span class="token punctuation">[</span>root@Ali ~<span class="token punctuation">]</span><span class="token comment">#</span></code></pre>
<h3>æœåŠ¡ç«¯å·¥å…· or åå°è¿›ç¨‹</h3>
<h4>a.ssh-agent</h4>
<blockquote>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯ <code>C Shell</code>ï¼Œéœ€è¦è¿½åŠ  <code>-s</code> é€‰é¡¹ã€‚</p>
</blockquote>
<p><code>ssh-agent</code> ç¨‹åºå¯ä»¥è·Ÿè¸ª ssh ç§é’¥ ï¼Œ<code>ssh-agent</code> çš„ä¾¿åˆ©æ€§åœ¨äºå¯ä»¥ä¸ç”¨æ¯æ¬¡è¾“å…¥ <code>passpharse</code> ï¼ˆåªéœ€åˆå§‹è¾“å…¥ä¸€æ¬¡ï¼‰ï¼Œè¿˜å¯ä»¥åœ¨è¿œç¨‹çš„æœºå™¨ä¸Šå¯ç”¨ <code>ssh-agent</code> è½¬å‘ï¼Œä½¿å¾—è¿œç¨‹æœºå™¨å¯ä»¥ä½¿ç”¨æœ¬åœ°è½¬å‘ç»™å®ƒçš„ç§é’¥è¿›è€Œè¿æ¥å…¶ä»–çš„è¿œç¨‹æœºå™¨ã€‚å¯ä»¥å‚è€ƒ <a href="https://developer.github.com/v3/guides/using-ssh-agent-forwarding/">Using SSH agent forwarding</a> ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹:</p>
<p><strong>æ³¨è§£ï¼š</strong></p>
<p>å¯¹ä¸¤ä¸ªç¯å¢ƒå˜é‡çš„è§£é‡Š =&gt;
<code>ssh</code> ä¸ <code>ssh-agent</code> æ˜¯ä¸¤ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œéœ€è¦é€šè¿‡ <code>ssh-agent</code> çš„ä¸¤ä¸ªç¯å¢ƒå˜é‡å®ç°äº¤æµï¼š</p>
<blockquote>
<ul>
<li><code>SSH_AGENT_PID</code>: å‚¨å­˜ ssh-agent è¿›ç¨‹çš„ PIDï¼›</li>
<li><code>SSH_AUTH_SOCK</code>: ä¸ºå®ç°è¿›ç¨‹é€šä¿¡ã€‚</li>
</ul>
</blockquote>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># é€šè¿‡ä½¿ç”¨evalå¯åŠ¨å®ƒå¹¶ä¸”æš´éœ²å®ƒå†…éƒ¨çš„ç¯å¢ƒå˜é‡ï¼ˆå› ä¸ºå®ƒä¸èƒ½è‡ªåŠ¨æš´éœ²ç¯å¢ƒå˜é‡åˆ°shellä¸­ï¼‰</span><br><span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span>ssh-agent<span class="token variable">)</span></span> <span class="token comment"># ä¸æš´éœ²ç¯å¢ƒå˜é‡ï¼Œå°±æ— æ³•ä¸ssh-agentæ²Ÿé€š</span><br><span class="token comment">## or</span><br>ssh-agent <span class="token function">zsh</span><br><span class="token comment">## or</span><br><span class="token builtin class-name">source</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>ssh-agent<span class="token punctuation">)</span><br><br><span class="token comment"># ssh-add</span><br>ssh-add</code></pre>
<p>ä¸‹é¢æ˜¯å¯¹ä¸ºä½•è¦ä½¿ç”¨ eval çš„ä¸€ä¸ªç›´è§‚è§£é‡Šï¼Ÿ</p>
<pre class="language-bash"><code class="language-bash">~<br>â–³ ssh-agent<br><span class="token assign-left variable"><span class="token environment constant">SSH_AUTH_SOCK</span></span><span class="token operator">=</span>/tmp/ssh-JcB99CiIGY8S/agent.192<span class="token punctuation">;</span> <span class="token builtin class-name">export</span> <span class="token environment constant">SSH_AUTH_SOCK</span><span class="token punctuation">;</span><br><span class="token assign-left variable">SSH_AGENT_PID</span><span class="token operator">=</span><span class="token number">193</span><span class="token punctuation">;</span> <span class="token builtin class-name">export</span> SSH_AGENT_PID<span class="token punctuation">;</span><br><span class="token builtin class-name">echo</span> Agent pid <span class="token number">193</span><span class="token punctuation">;</span><br><br>~<br>â–³ ssh-agent <span class="token function">zsh</span> <span class="token comment"># ä¸evalåŒæ•ˆæœ</span><br><br>~<br>â–³ <span class="token function">env</span><br><span class="token assign-left variable"><span class="token environment constant">HOSTTYPE</span></span><span class="token operator">=</span>x86_64<br><span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>C.UTF-8<br><span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/ProgramData/chocolatey/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files/nodejs/:/mnt/c/Users/Administrator/AppData/Local/Microsoft/WindowsApps:/mnt/c/Users/Administrator/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/Administrator/AppData/Roaming/npm<br><span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm-256color<br><span class="token assign-left variable">WT_SESSION</span><span class="token operator">=</span><span class="token number">20284759</span>-5434-4f3d-8e8e-a9c6b1afe1dc<br><span class="token assign-left variable">WT_PROFILE_ID</span><span class="token operator">=</span><span class="token punctuation">{</span>2c4de342-38b7-51cf-b940-2309a097f518<span class="token punctuation">}</span><br><span class="token assign-left variable">WSL_INTEROP</span><span class="token operator">=</span>/run/WSL/8_interop<br><span class="token assign-left variable">NAME</span><span class="token operator">=</span>beet<br><span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/home/beet<br><span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span>beet<br><span class="token assign-left variable"><span class="token environment constant">LOGNAME</span></span><span class="token operator">=</span>beet<br><span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/usr/bin/zsh<br><span class="token assign-left variable">WSL_DISTRO_NAME</span><span class="token operator">=</span>Ubuntu<br><span class="token assign-left variable"><span class="token environment constant">SHLVL</span></span><span class="token operator">=</span><span class="token number">2</span><br><span class="token assign-left variable"><span class="token environment constant">PWD</span></span><span class="token operator">=</span>/home/beet<br><span class="token assign-left variable"><span class="token environment constant">OLDPWD</span></span><span class="token operator">=</span>/home/beet<br><span class="token assign-left variable">PROMPT_EOL_MARK</span><span class="token operator">=</span><br><span class="token assign-left variable">CONDA_CHANGEPS1</span><span class="token operator">=</span>no<br><span class="token assign-left variable">VIRTUAL_ENV_DISABLE_PROMPT</span><span class="token operator">=</span><span class="token number">12</span><br><span class="token assign-left variable">_</span><span class="token operator">=</span>/usr/bin/env<br><span class="token comment">#####ä¸‹é¢ä¸¤ä¸ªæ˜¯agentçš„ç¯å¢ƒå˜é‡####</span><br><span class="token assign-left variable"><span class="token environment constant">SSH_AUTH_SOCK</span></span><span class="token operator">=</span>/tmp/ssh-nrFOHntUqfKi/agent.210<br><span class="token assign-left variable">SSH_AGENT_PID</span><span class="token operator">=</span><span class="token number">211</span></code></pre>
<blockquote>
<p>é™¤äº†ä½¿ç”¨ <code>ssh-agent &lt;youShell&gt;</code> å’Œ <code>source &lt;(ssh-agent)</code> å¯ä»¥æ›¿ä»£ eval å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>ssh-agent &lt;normal command&gt;</code> ä½¿å¾— <code>&lt;normal command&gt;</code> çš„è¿›ç¨‹å¤„äº <code>ssh-agent</code> çš„ç¯å¢ƒä¸­ï¼Œå› æ­¤ï¼Œä¸Šé¢ä¸¤æ¡å‘½ä»¤å®é™…å¯ä»¥ä½¿ç”¨ä¸€æ¡å‘½ä»¤ä»£æ›¿ï¼š</p>
</blockquote>
<pre class="language-bash"><code class="language-bash">ssh-agent ssh-add</code></pre>
<h4>b.sshd (ssh daemon)</h4>
<p><code>sshd</code> æ˜¯ ssh çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œæ˜¯é€šè¿‡ ssh æœåŠ¡ç«¯è¿æ¥å¿…è¦æ¡ä»¶ã€‚ä¸€èˆ¬ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç®¡ç†ï¼Œå­¦ä¼šé€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸€äº›é»˜è®¤é…ç½®å³å¯:</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶</span><br><span class="token function">vim</span> /etc/ssh/sshd_config<br><br><span class="token comment"># å‡ ä¸ªå¸¸ç”¨çš„é…ç½®å…³é”®å­—</span><br><span class="token comment">## ssdæœåŠ¡ç›‘å¬ç«¯å£</span><br>Port <span class="token number">22</span><br><span class="token comment">## ç¦æ­¢ä½¿ç”¨å¯†ç ç™»å½•</span><br>PasswordAuthentication no<br><span class="token comment">## å…è®¸ä½œä¸ºrootç™»å½•</span><br>PermitRootLogin <span class="token function">yes</span><br><span class="token comment">## å…¬é’¥ä¿å­˜ä½ç½®</span><br>AuthorizedKeysFile      .ssh/authorized_keys<br><span class="token comment">## å…è®¸agentè½¬å‘</span><br>AllowAgentForwarding <span class="token function">yes</span><br><span class="token comment">## subsystemä½¿ç”¨sftp-server</span><br>Subsystem       <span class="token function">sftp</span>    /usr/libexec/openssh/sftp-server</code></pre>
<h4>c.sftp-server</h4>
<p>sftp çš„æœåŠ¡ç«¯å­ç³»ç»Ÿï¼Œå¯ä»¥äº <code>/etc/ssh/sshd_config</code> ä¿®æ”¹ã€‚sftp-server çš„å­˜åœ¨æ˜¯ä¸ºäº†ä¿å­˜å‘åå…¼å®¹ï¼Œç°åœ¨å¯ä»¥ç”¨ sshd å†…ç½®çš„ <code>internal-sftp</code> ï¼Œè·å–æ›´å¥½çš„æ€§èƒ½ã€‚</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># æ›´æ”¹subsystemä¸ºinternal-sftp</span><br>Subsystem <span class="token function">sftp</span> internal-sftp</code></pre>
<hr>
<blockquote>
<p>æœ¬æ–‡ä¸­ç”¨äºçš„æ–‡ä»¶ç³»ç»Ÿå¾ˆå°‘æåŠ(æˆ‘åªåŠŸåˆ©æ€§çš„å…³æ³¨äº†å‡ ä¸ªé…ç½®æ–‡ä»¶)ï¼Œä½†å…¶å®ƒçš„æ–‡ä»¶å´éå¸¸é‡è¦ï¼ŒManual ä¸­æœ‰è¯¦ç»†çš„æç¤ºï¼Œè¿˜éœ€åšæŒå­¦ä¹ </p>
</blockquote>
<h3>ssh alias</h3>
<p>å¯¹äºæˆ‘æ¥è¯´ï¼Œshell è®¾ç½®å¤ªå¤š alias æ„Ÿè§‰å¾ˆä¹±ï¼Œæƒ³è¦ç®€åŒ– ssh çš„è¿æ¥æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ <code>ssh alias</code> ã€‚</p>
<p>ç¼–è¾‘ ssh é…ç½®æ–‡ä»¶</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">vim</span> ~/.ssh/config</code></pre>
<p>æŒ‰å¦‚ä¸‹ç±»ä¼¼æ ¼å¼æ·»åŠ ï¼ˆä¸è¦ä¿®æ”¹åŸæœ¬å†…å®¹ï¼‰ï¼š</p>
<p>æŒ‰å¦‚ä¸‹ç±»ä¼¼æ ¼å¼å†™å…¥ï¼š</p>
<pre class="language-bash"><code class="language-bash">Host hostaliasname<br>     HostName <span class="token number">221.236</span>.11.90<br>     User root<br>     Port <span class="token number">2233</span></code></pre>
<p>ä»¥åçš„è¿æ¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>ssh &lt;hostaliasname&gt;</code>å³å¯</p>
<h3>Openssh ä¹‹å¤–</h3>
<p>é™¤äº† Openssh çš„å¼ºå¤§å·¥å…·ï¼Œæˆ‘è¿˜æƒ³ä»‹ç»ä¸€ä¸ªåˆ©ç”¨ sftp æŒ‚è½½ç£ç›˜çš„å·¥å…·ï¼Œå¾ˆæ˜¯å®ç”¨ã€‚</p>
<p><code>SSHFS</code> å¯ä»¥é€šè¿‡ sftp æ¥æŒ‚è½½è¿œç«¯ç¡¬ç›˜ä½ç½®åˆ°æœ¬åœ°ï¼š</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># mount</span><br>sshfs <span class="token punctuation">[</span>user@<span class="token punctuation">]</span><span class="token number">221.236</span>.11.90:<span class="token punctuation">[</span>directory<span class="token punctuation">]</span> mountpoint<br><span class="token comment"># unmount</span><br>fusermount -u mountpoint</code></pre>
<ul>
<li>
<p>å‚è€ƒåŠè¡¥å……</p>
<p><a href="https://www.openssh.com/">openssh manual</a></p>
<p><a href="https://www.ssh.com/ssh/keygen/">ssh keygen</a></p>
<p><a href="https://serverfault.com/questions/660160/openssh-difference-between-internal-sftp-and-sftp-server">OpenSSH: Difference between internal-sftp and sftp-server</a></p>
<p><a href="https://stackoverflow.com/questions/34906302/add-public-key-to-known-hosts-file">add public key to known hosts file</a></p>
</li>
</ul>

	    </div>
		<div class="outline"></div>
		<div class="comment">
			<button id="show-comments" onclick="loadDisqus();return false;">Load/Post Comments ğŸ¤—</button>
			<div id="disqus_thread"></div>
		</div>
	</article>

	<script>
	var disqus_config = function () {
		this.page.url = "https://www.beetcb.com/posts/17/"
		this.page.identifier = "/posts/17/"
	};
	function loadDisqus() {
    var d = document,
      s = d.createElement('script'),
      load = document.getElementById('show-comments'),
      dot = 0

    // loading animation
    load.innerHTML = 'loading ' + 'â—¦' + ' ğŸ˜›'
    loadInterval = setInterval(() => {
      load.innerHTML = 'loading ' + 'â—¦'.repeat(dot + 2) + ' ğŸ˜›'
      dot === 1 ? (dot = -dot) : dot++
    }, 1000)

    s.async = true
    s.setAttribute('data-timestamp', +new Date())
    s.src = 'https://beets-blog.disqus.com/embed.js'
    ;(d.head || d.body).appendChild(s)

    function listen(target, event, callback) {
      return target.addEventListener(event, callback)
    }

    // check the comment loadding process
    let commentPromise = new Promise((resolve, reject) => {
      listen(s, 'load', resolve)
      listen(s, 'error', reject)
    })
    commentPromise
      .then(() => {
        clearInterval(loadInterval)
        s.removeEventListener('load', arguments.callee)
        load.innerHTML = 'loadding completed ğŸ˜'
        setTimeout(() => (load.style.display = 'none'), 1000)
      })
      .catch(() => {
        clearInterval(loadInterval)
        s.removeEventListener('load', arguments.callee)
        load.innerHTML = 'ğŸ¶ OOPSï¼Try to use Proxy?'
      })
  }	
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                     
     
		</main>
		<footer class="footer">
		    <div class="footer-desc">
			made with love&<a style="color: skyblue;" href="https://www.11ty.dev/"
			    target="_blank">11ty</a> by beet <br> 
			<a href="http://www.beian.miit.gov.cn/" target="_blank">ICP-20003648-1</a>
		    </div>
		</footer>
	    </body></html>