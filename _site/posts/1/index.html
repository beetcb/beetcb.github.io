<!DOCTYPE html>
<html lang="en"><head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <meta name="description" content="a beginer theme based blog project with 11ty">
	    <title>beet-11ty</title>
	    <link rel="stylesheet" href="/src/css/my.css">
	    <link rel="stylesheet" href="/src/css/prism-dracula.css">
	    <link rel="shortcut icon" href="/src/favicon.ico" type="image/x-icon">
	    <script defer src="/src/js/my.js"></script>
	    </head><body>
		<main class="main">
		
	<article style="margin: 0 auto" class="article">
	    <h1 class="title">超简单搭建甜菜一盘记录-oneindex</h1>
	    <div class="content">
		<h4>效果演示</h4>
<p>甜菜一盘演示地址</p>
<blockquote>
<p>https://pan.beetcb.com</p>
</blockquote>
<p>演示截图如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.4.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.5.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.6.png" alt=""></p>
<h4>优点（多多）</h4>
<ul>
<li>
<p>oneindex 不走服务器流量，直连国内世纪互联数据中心</p>
</li>
<li>
<p>下载不限速，亲测跑满带宽（速度优于国产网盘）</p>
</li>
<li>
<p>空间1-5 T , 自定义页面，可玩性大</p>
</li>
<li>
<p>微软官方解释：</p>
<blockquote>
<p>我们为中国用户提供了 Office 365 全球版和 Office 365 中国版两种版本。主要区别在于：
Office 365 中国版由世纪互联负责运营，数据中心位于北京、上海，可以提供增值税发票。
目前仅 Office 365 全球版提供 Yammer、Microsoft Planner、Microsoft Teams 以及 Sway 等产品。</p>
</blockquote>
</li>
</ul>
<h4>准备工作及搭建条件</h4>
<h5>撸一个世纪互联版 onedrive 账号（<strong>必须管理员开放 API</strong> ）</h5>
<p>获取渠道如下：</p>
<blockquote>
<p>#<strong>合租（超稳车）</strong>：拉人上车或者上别人的车
<a href="https://products.office.com/zh-cn/compare-china-global-versions-office365">世纪互联官方购买入口</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.0.png" alt=""></p>
<p>#<strong>某宝购买（摇摇车）</strong>：稳定性难说,这里beet推荐官网购买</p>
<p>#非世纪互联（除个人版） onedrive 也可搭建</p>
</blockquote>
<h5>拥有服务器与个人域名</h5>
<blockquote>
<p>无服务器及域名可选择用* 阿里云 * 或* 腾讯云 *的函数计算功能</p>
</blockquote>
<h5>阅读官方 md 说明</h5>
<blockquote>
<p><s><a href="https://github.com/donwa/oneindex">oneindex官方github地址</a></s> 失效 ，替代<a href="https://github.com/Layne666/oneindex/archive/master.zip">下载地址</a>
自学md文档可以快速上手，甚至可以不看我这篇教程，一个小白教程，必然从安装宝塔开始，始简单的折腾吧！</p>
</blockquote>
<h4>服务器及域名的配置</h4>
<p>+安装宝塔面板与建站依赖</p>
<p>++域名解析到服务器</p>
<p>+++新建网站并申请 ssl 证书, php安装curl扩展</p>
<p>++++ 复制<a href="https://github.com/donwa/oneindex/archive/master.zip">下载链接</a>，远程下载并解压到网站根目录</p>
<h5>[两个需要修改的位置]</h5>
<ol>
<li>取消注释  index.php 文件里下面两行代码（line6&amp;7）</li>
</ol>
<pre class="language-php"><code class="language-php"><span class="token comment">//onedrive::$api_url = "https://microsoftgraph.chinacloudapi.cn/v1.0";</span><br><span class="token comment">//onedrive::$oauth_url = "https://login.partner.microsoftonline.cn/common/oauth2/v2.0";</span></code></pre>
<ol start="2">
<li>修改 contrer 目录下 AdminController.php 为自己的域名（line186）</li>
</ol>
<pre class="language-php"><code class="language-php"><span class="token variable">$redirect_uri</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'https://oneindex.github.io/'</span><span class="token punctuation">;</span></code></pre>
<h4>登录 azure 获得机密与ID</h4>
<blockquote>
<p>最关键部分，配置正确直接一次性成功，请按图操作</p>
</blockquote>
<h5>[登录并注册应用]</h5>
<p><a href="https://portal.azure.cn/">azure登录入口</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.1.png" alt=""></p>
<h5>[保存client ID，申请权限与秘钥]</h5>
<blockquote>
<p>记得复制client和secrets备用</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.2.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/sweetcly/beetpic/1.3.png" alt=""></p>
<h4>复制粘贴［完事儿］</h4>
<p>*输入域名进入网站</p>
<p>*按提示粘贴提前复制的 client ID 与secrets秘钥</p>
<p>*绑定账户，搭建成功</p>
<p>*进入后台，修改密码</p>
<h4>自定义</h4>
<p>自定义主题相对简单，只需要搜索 oneindex 主题，替换默认主题并做一定修改就可，这里不再赘述</p>
<h4>最后，享受高速上传与下载吧(别说你还不会)</h4>

	    </div>
	    <div class="outline"></div>
	</article>

     
		</main>
		<footer class="footer">
				    <div class="footer-desc" style="font-size:14px">
			made with love&<a style="color: skyblue;" href="https://www.11ty.dev/"
			    target="_blank">11ty</a> by beet
		    </div>
		</footer>

	    </body></html>